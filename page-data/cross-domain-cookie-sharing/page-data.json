{"componentChunkName":"component---gatsby-ghost-theme-src-templates-post-js","path":"/cross-domain-cookie-sharing","webpackCompilationHash":"283f27f644fa2f206251","result":{"data":{"post":{"html":"<p>A few days ago I was asked to modify existing sites to share some info written inside a cookie files. My first response was \"This is impossible because of cookie security policies\", but after a moment I've realized that such cookie sharing scenario might be achieved using an old <code class=\"language-text\">&lt;img src=&quot;...&quot; /&gt;</code> trick. Here is how I manage to share a cookie stored informations across two completely different domains. Sharing across subdomains is much easier and doesn't require any \"magic\" (so it's not a subject of this article).</p>\n<h2>How to share a cookie across domains?</h2>\n<p>It is of course impossible using standard solutions, no Javascript nor PHP or any other language can write a cookie info for a different domain than it's origin domain. This is crucial to ensure cookies security.</p>\n<p>So how it can be done you may ask. The standard <code class=\"language-text\">&lt;img/&gt;</code> tag comes to the rescue.\nOn each website create an invisible image which source will be pointing to the other domain with some arbitrary GET argument which will have a value of you cookie value (urlencoded of course). This way each time your first site is opened the other page gets also required information about current cookie value.</p>\n<p>Of course you have to write approperiate GET request handler for each site connected that way. Such code should set cookie value based on GET variable content (GET variables are automatically urldecoded).</p>\n<h2>Cross-domain cookie caveats</h2>\n<p>As with every non-standard solution you should think about all possible quirks and bugs that may hit you.\nAjax requests for starters. Each request may change current cookie value which should be somehow handled by you website without page refreshing. </p>","excerpt":"A few days ago I was asked to modify existing sites to share some info written inside a cookie files. My first response was \"This isâ€¦","timeToRead":1,"rawMarkdownBody":"A few days ago I was asked to modify existing sites to share some info written inside a cookie files. My first response was \"This is impossible because of cookie security policies\", but after a moment I've realized that such cookie sharing scenario might be achieved using an old `<img src=\"...\" />` trick. Here is how I manage to share a cookie stored informations across two completely different domains. Sharing across subdomains is much easier and doesn't require any \"magic\" (so it's not a subject of this article).\n\n## How to share a cookie across domains?\nIt is of course impossible using standard solutions, no Javascript nor PHP or any other language can write a cookie info for a different domain than it's origin domain. This is crucial to ensure cookies security.\n\nSo how it can be done you may ask. The standard `<img/>` tag comes to the rescue.\nOn each website create an invisible image which source will be pointing to the other domain with some arbitrary GET argument which will have a value of you cookie value (urlencoded of course). This way each time your first site is opened the other page gets also required information about current cookie value.\n\nOf course you have to write approperiate GET request handler for each site connected that way. Such code should set cookie value based on GET variable content (GET variables are automatically urldecoded).\n\n## Cross-domain cookie caveats\nAs with every non-standard solution you should think about all possible quirks and bugs that may hit you.\nAjax requests for starters. Each request may change current cookie value which should be somehow handled by you website without page refreshing. \n","frontmatter":{"author":"jan","feature_image":null,"title":"Cross-domain cookie sharing","slug":"cross-domain-cookie-sharing","date":null,"tags":[],"date_created":"2017-12-09T06:22:33.000Z","date_updated":"2018-09-15T13:25:21.000Z","featured":false}},"similarPosts":{"edges":[]},"authors":{"edges":[{"node":{"id":"1","slug":"jan","name":"Jan Grzegorowski","bio":"Full-stack developer currently working with React / Java stack at Equinix","website":"","location":"","profile_image":{"relativePath":"avatar/photo-mini.jpg","childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUEAv/EABQBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAa8+nhDphjnIF7Ah/8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAxEiMf/aAAgBAQABBQK5mUB762lg1VGvG8Udif/EABcRAQEBAQAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8BAyHJ/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAECAQE/ATUav//EABsQAQACAgMAAAAAAAAAAAAAAAECEgAQESAx/9oACAEBAAY/Agh64Wbx56u//8QAHBABAAIDAAMAAAAAAAAAAAAAAQARECExgaGx/9oACAEBAAE/IRAL6t4R+NaJW948RDMDnzHpQyxFZP/aAAwDAQACAAMAAAAQD8A8/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EGNZvP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxBJGE//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhEDFRgcH/2gAIAQEAAT8Qfyh9bKr5wsWRAIpRh0prgVXZTPUxvgwCqwb+cGlgG6ILpxBXtz//2Q==","width":30,"height":30,"src":"/static/2b64da00e4a3f2952c8d9e3a6b631208/a6b89/photo-mini.jpg","srcSet":"/static/2b64da00e4a3f2952c8d9e3a6b631208/a6b89/photo-mini.jpg 1x,\n/static/2b64da00e4a3f2952c8d9e3a6b631208/74c3b/photo-mini.jpg 1.5x,\n/static/2b64da00e4a3f2952c8d9e3a6b631208/9c097/photo-mini.jpg 2x"}}},"profile_image_large":{"relativePath":"avatar/photo-mini.jpg","childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUEAv/EABQBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAa8+nhDphjnIF7Ah/8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAxEiMf/aAAgBAQABBQK5mUB762lg1VGvG8Udif/EABcRAQEBAQAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8BAyHJ/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAECAQE/ATUav//EABsQAQACAgMAAAAAAAAAAAAAAAECEgAQESAx/9oACAEBAAY/Agh64Wbx56u//8QAHBABAAIDAAMAAAAAAAAAAAAAAQARECExgaGx/9oACAEBAAE/IRAL6t4R+NaJW948RDMDnzHpQyxFZP/aAAwDAQACAAMAAAAQD8A8/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EGNZvP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxBJGE//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhEDFRgcH/2gAIAQEAAT8Qfyh9bKr5wsWRAIpRh0prgVXZTPUxvgwCqwb+cGlgG6ILpxBXtz//2Q==","width":60,"height":60,"src":"/static/2b64da00e4a3f2952c8d9e3a6b631208/9c097/photo-mini.jpg","srcSet":"/static/2b64da00e4a3f2952c8d9e3a6b631208/9c097/photo-mini.jpg 1x,\n/static/2b64da00e4a3f2952c8d9e3a6b631208/c5aad/photo-mini.jpg 1.5x"}}}}}]},"tags":{"edges":[]},"tagPosts":{"edges":[],"totalCount":0}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"cross-domain-cookie-sharing","tags":[],"author":"jan","mainTag":"","prev":{"frontmatter":{"slug":"babel-plugin-basics","tags":[],"author":"jan"}},"next":{"frontmatter":{"slug":"docker-private-registry-harbor-with-lets-encrypt","tags":[],"author":"jan"}}}}}