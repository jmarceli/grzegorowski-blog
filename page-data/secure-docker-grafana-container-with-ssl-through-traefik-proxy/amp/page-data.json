{"componentChunkName":"component---gatsby-ghost-theme-src-templates-post-js","path":"/secure-docker-grafana-container-with-ssl-through-traefik-proxy/amp/","webpackCompilationHash":"b50c9ba01a05d4675850","result":{"data":{"post":{"html":"<p>You are wondering how to auto-generate free and auto-renewable SSL certificate for you Grafana container?\nThis was also my concern some time ago, so I did create not so ideal Grafana, Nginx-proxy, Let's Encrypt setup which was suppose to do this. It was a lot of configuration and effects are not as good as I would expect. The challenging part was connected with certificate auto-renewal and providing that renewed certificate to Grafana container.\nIt turns out that I was doing it wrong.</p>\n<p>Say hello to the <a href=\"https://docs.traefik.io/v2.0/\">Traefik 2.0.0-beta edge router</a>.</p>\n<h2>Overview</h2>\n<p>In this tutorial I will show you how to setup Grafana Docker container sitting behind Traefik 2.0.0-beta proxy. Traefik will auto-generate and auto-renew free SSL certificate thanks to the Let's Encrypt magic. The only thing which you will need is a domain and VPS server (or some Docker capable service).</p>\n<h2>Solution</h2>\n<p>Create <strong>docker-compose.yml</strong> file with content similar to the code below.</p>\n<p>Replace:</p>\n<ul>\n<li><code class=\"language-text\">YOUR.DOMAIN.TEST</code> with your domain name</li>\n<li><code class=\"language-text\">SECURE_USERNAME</code> with some username</li>\n<li><code class=\"language-text\">SECURE_PASS</code> with some secure password</li>\n<li><code class=\"language-text\">YOUR_EMAIL_ADDRESS</code> with your email address</li>\n</ul>\n<p><strong>docker-compose.yml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yml line-numbers\"><code class=\"language-yml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3\"</span>\n\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">grafana</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># SSL redirect requires a separate router (https://github.com/containous/traefik/issues/4688#issuecomment-477800500)</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"traefik.http.routers.some-name.entryPoints=port80\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"traefik.http.routers.some-name.rule=host(`YOUR.DOMAIN.TEST`)\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"traefik.http.middlewares.some-name-redirect.redirectScheme.scheme=https\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"traefik.http.middlewares.some-name-redirect.redirectScheme.permanent=true\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"traefik.http.routers.some-name.middlewares=some-name-redirect\"</span>\n      <span class=\"token comment\"># SSL endpoint</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"traefik.http.routers.some-name-ssl.entryPoints=port443\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"traefik.http.routers.some-name-ssl.rule=host(`YOUR.DOMAIN.TEST`)\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"traefik.http.routers.some-name-ssl.tls=true\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"traefik.http.routers.some-name-ssl.tls.certResolver=le-ssl\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"traefik.http.routers.some-name-ssl.service=some-name-ssl\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"traefik.http.services.some-name-ssl.loadBalancer.server.port=3000\"</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> grafana/grafana<span class=\"token punctuation\">:</span>6.3.2 <span class=\"token comment\"># or probably any other version</span>\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> grafana<span class=\"token punctuation\">-</span>data<span class=\"token punctuation\">:</span>/var/lib/grafana\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> GF_SERVER_ROOT_URL=https<span class=\"token punctuation\">:</span>//YOUR.DOMAIN.TEST\n      <span class=\"token punctuation\">-</span> GF_SERVER_DOMAIN=YOUR.DOMAIN.TEST\n      <span class=\"token punctuation\">-</span> GF_USERS_ALLOW_SIGN_UP=false\n      <span class=\"token punctuation\">-</span> GF_SECURITY_ADMIN_USER=SECURE_USERNAME\n      <span class=\"token punctuation\">-</span> GF_SECURITY_ADMIN_PASSWORD=SECURE_PASS\n\n  <span class=\"token key atrule\">traefik</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> traefik<span class=\"token punctuation\">:</span>v2.0.0<span class=\"token punctuation\">-</span>beta1\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"80:80\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"443:443\"</span>\n      <span class=\"token comment\"># expose port below only if you need access to the Traefik API</span>\n      <span class=\"token comment\">#- \"8080:8080\"</span>\n    <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\">#- \"--log.level=DEBUG\"</span>\n      <span class=\"token comment\">#- \"--api=true\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"--providers.docker=true\"</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"--entryPoints.port443.address=:443\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"--entryPoints.port80.address=:80\"</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"--certificatesResolvers.le-ssl.acme.tlsChallenge=true\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"--certificatesResolvers.le-ssl.acme.email=YOUR_EMAIL_ADDRESS\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"--certificatesResolvers.le-ssl.acme.storage=/letsencrypt/acme.json\"</span>\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> traefik<span class=\"token punctuation\">-</span>data<span class=\"token punctuation\">:</span>/letsencrypt/\n      <span class=\"token punctuation\">-</span> /var/run/docker.sock<span class=\"token punctuation\">:</span>/var/run/docker.sock\n\n<span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">traefik-data</span><span class=\"token punctuation\">:</span>\n  grafana<span class=\"token punctuation\">-</span>data<span class=\"token punctuation\">:</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Now you are ready to go with <code class=\"language-text\">docker-compose up -d</code> command executed inside the folder where <strong>docker-compose.yml</strong> file is saved.</p>\n<p>That's it. You are done.</p>\n<p>Now your Grafana connections are secured with free Let's Encrypt SSL certificate. What is more you don't have to worry about certificate renewal, because Traefik will do it for you.</p>\n<p>NOTE: Most of <code class=\"language-text\">some-name</code> or <code class=\"language-text\">some-name-...</code> and <code class=\"language-text\">le-ssl</code> may be replaced with your own names. Just make sure that those names are unique across all containers handled by the Traefik.</p>\n<h2>Description</h2>\n<p>For those who want to know more than just copy/paste code above I've prepared more detailed description of some configuration aspects.</p>\n<h3>Traefik</h3>\n<p>This is a \"place\" where the most of magic happens.</p>\n<p>Every request starts by entering some entry point (ingress port) defined as Traefik container label, here we have two entry points <code class=\"language-text\">80</code> (HTTP) and <code class=\"language-text\">443</code> (HTTPS).</p>\n<p>Then traffic from ports is routed according to the routing rules specified inside containers labels e.g. <code class=\"language-text\">host</code> rule used in this example tells Traefik that every request for given domain should be routed to the container with this label.</p>\n<p>After that there may be some middleware, in this example we have <code class=\"language-text\">redirectScheme</code> defined which redirects requests to <code class=\"language-text\">https</code> entry point. It is basically a set of \"transformations\" applied on the routed traffic.</p>\n<p>At the end some <code class=\"language-text\">service</code> may be defined which can for example specify a port. By default Grafana exposes <code class=\"language-text\">3000</code> port, so the <code class=\"language-text\">loadBalancer</code> service is used to redirect requests to that port.</p>\n<p>The official docs got all of this covered <a href=\"https://docs.traefik.io/v2.0/routing/overview/\">https://docs.traefik.io/v2.0/routing/overview/</a></p>\n<h3>Ports</h3>\n<p>You (probably) should open ports only on Traefik container and then route the incoming traffic to other containers with Traefik routing rules.</p>\n<h3>Labels</h3>\n<p>Labels are the way of providing configuration for the Traefik container. It is named a \"Dynamic configuration\" in Traefik docs and you can find a reference <a href=\"https://docs.traefik.io/v2.0/reference/dynamic-configuration/docker/\">here</a> or \"Static Configuration\" <a href=\"https://docs.traefik.io/v2.0/reference/static-configuration/cli/\">here</a>.</p>\n<p>Static configuration is defined with CLI flags e.g. <code class=\"language-text\">--providers.docker=true</code> which has to be set as labels for Traefik container.</p>\n<p>Dynamic configuration is connected with other containers which are \"behind\" Traefik proxy e.g. <code class=\"language-text\">traefik.http.routers.some-name.entryPoints=port80</code>.</p>\n<p>Dynamic and Static Configuration keys defined by labels are not case sensitive, so <code class=\"language-text\">--certificatesresolvers.le-ssl.acme.tlschallenge</code> will work same as <code class=\"language-text\">--CertificatesResolvers.le-ssl.acme.TlsChallenge</code> or\n<code class=\"language-text\">--certificatesResolvers.le-ssl.acme.tlsChallenge</code>. Use whichever you prefer (I would go for readability with camelCase).</p>\n<h3>Debugging</h3>\n<p>In order to get more verbose output from Traefik container you can define <code class=\"language-text\">--log.level=DEBUG</code> flag. It is also useful during the development to enable Traefik API with <code class=\"language-text\">--api=true</code> label assigned to the Traefik container. It will open HTTP endpoint on <code class=\"language-text\">8080</code> port where you can fetch some more details about current configuration <a href=\"https://docs.traefik.io/v2.0/operations/api/#endpoints\">here are the URLS</a> one more very useful is <code class=\"language-text\">/api/rawdata</code> which returns entire configuration in JSON format.</p>\n<p>Be aware of possible collision of Traefik API with some entryPoint which you may define. It's probably better to avoid creating any entry point connected with <code class=\"language-text\">8080</code> port.</p>\n<h3>SSL</h3>\n<p>In development it might be a good idea to define for Traefik container <code class=\"language-text\">--certificatesResolvers.sample.acme.caServer=&quot;https://acme-staging-v02.api.letsencrypt.org/directory&quot;</code> this will let you avoid Let's Encrypt errors connected with issuing too many certificates for given domain.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Unable to obtain ACME certificate for domains ...\nError creating new order :: too many certificates already issued for exact set of domains ...\n... see https://letsencrypt.org/docs/rate-limits/ ...</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Note that SSL encryption ensured by the Traefik is terminated by default on the \"edge\" of the network. So in our case it means that traffic between Traefik and Grafana containers is not encrypted. That is why we don't have to set any SSL related flags on Grafana container. The SSL encryption is ensured \"only\" between user browser and Traefik, which is in most cases more than enough.</p>\n<h3>Watch mode</h3>\n<p>By default Traefik is in watch mode which means that if you change a labels for some container you don't have to restart Traefik container for changes to take effect.</p>\n<h3>Persistence</h3>\n<p>Data persistence ensured by the <code class=\"language-text\">volumes</code> directive let's us reuse SSL certificates generated during first Traefik run and ensures that Grafana related configuration is not lost after executing <code class=\"language-text\">docker-compose down</code>. This is a handy feature of a Docker but it is good to know where to look for actual files. Docker volumes (on Ubuntu) are usually located inside <code class=\"language-text\">/var/lib/docker/volumes/</code> directory. You may check yours with <code class=\"language-text\">docker volume ls</code> and then <code class=\"language-text\">docker volume inspect [VOLUME_NAME]</code>.</p>\n<h3>Grafana</h3>\n<p><code class=\"language-text\">GF_SERVER_ROOT_URL</code> and <code class=\"language-text\">GF_SERVER_DOMAIN</code> are important because by default Grafana is not aware of the proxy between its container and the Internet, so in order to generate correct links you have to define the public URL.</p>\n<h2>Add Influx</h2>\n<p>If you would like to add some database, which is probably most of the Grafana use cases, you can easily define additional container. Just extend your <strong>docker-compose.yml</strong> file with:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yml line-numbers\"><code class=\"language-yml\"><span class=\"token key atrule\">influx</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> influxdb<span class=\"token punctuation\">:</span><span class=\"token number\">1.7 </span><span class=\"token comment\"># or any other recent version</span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># SSL endpoint</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"traefik.http.routers.some-name-influx-ssl.entryPoints=port8086\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"traefik.http.routers.some-name-influx-ssl.rule=host(`YOUR.DOMAIN.TEST`)\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"traefik.http.routers.some-name-influx-ssl.tls=true\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"traefik.http.routers.some-name-influx-ssl.tls.certResolver=le-ssl\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"traefik.http.routers.some-name-influx-ssl.service=some-name-influx-ssl\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"traefik.http.services.some-name-influx-ssl.loadBalancer.server.port=8086\"</span>\n  <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always\n  <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> influx<span class=\"token punctuation\">-</span>data<span class=\"token punctuation\">:</span>/var/lib/influxdb\n  <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> INFLUXDB_DB=SOME_DB_NAME <span class=\"token comment\"># set any other to create database on initialization</span>\n    <span class=\"token punctuation\">-</span> INFLUXDB_HTTP_ENABLED=true\n    <span class=\"token punctuation\">-</span> INFLUXDB_HTTP_AUTH_ENABLED=true\n\n    <span class=\"token punctuation\">-</span> INFLUXDB_ADMIN_USER=SECURE_USERNAME\n    <span class=\"token punctuation\">-</span> INFLUXDB_ADMIN_PASSWORD=SECURE_PASS</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Extend <code class=\"language-text\">volumes</code> section with <code class=\"language-text\">influx-data</code> volume:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yml line-numbers\"><code class=\"language-yml\"><span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\">#...</span>\n  influx<span class=\"token punctuation\">-</span>data<span class=\"token punctuation\">:</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Add another entry point to the Traefik container by opening <code class=\"language-text\">8086</code> port:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yml line-numbers\"><code class=\"language-yml\"><span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\">#...</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token string\">\"8086:8086\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>and adding a label:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yml line-numbers\"><code class=\"language-yml\"><span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\">#...</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token string\">\"--entryPoints.port8086.address=:8086\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Now you have also a fully functional Influx database secured with SSL.</p>\n<h2>Sources</h2>\n<ul>\n<li>Official docs - <a href=\"https://docs.traefik.io/v2.0/user-guides/docker-compose/acme-tls/\">https://docs.traefik.io/v2.0/user-guides/docker-compose/acme-tls/</a></li>\n<li>Request flow - <a href=\"https://docs.traefik.io/v2.0/routing/overview/\">https://docs.traefik.io/v2.0/routing/overview/</a></li>\n<li>Dynamic Configuration - <a href=\"https://docs.traefik.io/v2.0/reference/dynamic-configuration/docker/\">https://docs.traefik.io/v2.0/reference/dynamic-configuration/docker/</a></li>\n<li>Static Configuration - <a href=\"https://docs.traefik.io/v2.0/reference/static-configuration/cli/\">https://docs.traefik.io/v2.0/reference/static-configuration/cli/</a></li>\n<li>TLS redirect middleware related issue - <a href=\"https://github.com/containous/traefik/issues/4688#issuecomment-477800500\">https://github.com/containous/traefik/issues/4688#issuecomment-477800500</a></li>\n<li><a href=\"/grafana-with-lets-encrypt-ssl-on-docker\">The old article with some more information</a></li>\n</ul>","excerpt":"You are wondering how to auto-generate free and auto-renewable SSL certificate for you Grafana container?\nThis was also my concern some time…","timeToRead":7,"frontmatter":{"author":"jan","feature_image":{"absolutePath":"/Users/janek/work/github_contrib/grzegorowski.com/blog/content/posts/img/john-salvino-bqGBbLq_yfc-unsplash.jpg","relativePath":"posts/img/john-salvino-bqGBbLq_yfc-unsplash.jpg","publicURL":"/static/john-salvino-bqGBbLq_yfc-unsplash-4d525edcf50e81776a4523f27c7e4cca.jpg","childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFAgT/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABltV1RONFf//EABoQAQACAwEAAAAAAAAAAAAAAAIBMgARITH/2gAIAQEAAQUCE6xGRC9HA6q3/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxABAQEBAAAAAAAAAAAAAAAAARAAQf/aAAgBAQAGPwKrg5P/xAAaEAEBAQEBAQEAAAAAAAAAAAABEQAxIVGR/9oACAEBAAE/IR64gOcklO26/wAbwHZM1SqCB8x9b//aAAwDAQACAAMAAAAQDA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhMUFRYXH/2gAIAQEAAT8QNMEIeS22XOkWnFoX5ERnNFz5FQDQUuty5eEOnRCAq6oy+T//2Q==","aspectRatio":1.6681659170414793,"src":"/static/4d525edcf50e81776a4523f27c7e4cca/14dee/john-salvino-bqGBbLq_yfc-unsplash.jpg","srcSet":"/static/4d525edcf50e81776a4523f27c7e4cca/6ece9/john-salvino-bqGBbLq_yfc-unsplash.jpg 480w,\n/static/4d525edcf50e81776a4523f27c7e4cca/0a89a/john-salvino-bqGBbLq_yfc-unsplash.jpg 960w,\n/static/4d525edcf50e81776a4523f27c7e4cca/14dee/john-salvino-bqGBbLq_yfc-unsplash.jpg 1920w,\n/static/4d525edcf50e81776a4523f27c7e4cca/04376/john-salvino-bqGBbLq_yfc-unsplash.jpg 2880w,\n/static/4d525edcf50e81776a4523f27c7e4cca/e5c3d/john-salvino-bqGBbLq_yfc-unsplash.jpg 3338w","sizes":"(max-width: 1920px) 100vw, 1920px"},"sizes":{"presentationHeight":480,"presentationWidth":800}}},"title":"Secure Docker Grafana container with SSL through Traefik proxy","slug":"secure-docker-grafana-container-with-ssl-through-traefik-proxy","tags":["docker","backend"],"date_created":"2019-07-18T10:00:00.000Z","date_updated":"2019-07-18T10:00:00.000Z","featured":false}},"similarPosts":{"edges":[{"node":{"timeToRead":8,"excerpt":"You want to check how (or if) your application works with SSL encryption without exposing it to the Internet? Use a self-signed SSL…","frontmatter":{"title":"Traefik - proxy development server with self-signed SSL certificate","slug":"traefik-proxy-development-server-self-signed-ssl","tags":["backend","tools"],"date_created":"2018-11-07T19:08:02.000Z","date_updated":"2018-11-08T18:16:57.000Z","featured":false,"author":"jan","feature_image":{"absolutePath":"/Users/janek/work/github_contrib/grzegorowski.com/blog/content/posts/img/photo-1512168203104-3910bc2bcd54.jpg","relativePath":"posts/img/photo-1512168203104-3910bc2bcd54.jpg","childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAeABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAECAwQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAe0nkjUMDNfAtIB//8QAGRAAAwEBAQAAAAAAAAAAAAAAAAECEBEx/9oACAEBAAEFAtfkNuhkzyh7/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFxAAAwEAAAAAAAAAAAAAAAAAAREgMP/aAAgBAQAGPwKA8P/EABoQAAIDAQEAAAAAAAAAAAAAAAARARBBITH/2gAIAQEAAT8hm/YxonXgndldR0S0cn//2gAMAwEAAgADAAAAEL//AMP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAbEAADAQADAQAAAAAAAAAAAAAAARExECFRQf/aAAgBAQABPxCh3wQuWkmR4R7843S0Q/CbnCqXZDZumQoaf//Z","aspectRatio":2,"src":"/static/d82df298cb57c0123e8c64bd116c3d65/0defe/photo-1512168203104-3910bc2bcd54.jpg","srcSet":"/static/d82df298cb57c0123e8c64bd116c3d65/38b6a/photo-1512168203104-3910bc2bcd54.jpg 150w,\n/static/d82df298cb57c0123e8c64bd116c3d65/e201c/photo-1512168203104-3910bc2bcd54.jpg 300w,\n/static/d82df298cb57c0123e8c64bd116c3d65/0defe/photo-1512168203104-3910bc2bcd54.jpg 600w,\n/static/d82df298cb57c0123e8c64bd116c3d65/a71f1/photo-1512168203104-3910bc2bcd54.jpg 900w,\n/static/d82df298cb57c0123e8c64bd116c3d65/8d595/photo-1512168203104-3910bc2bcd54.jpg 1080w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}},{"node":{"timeToRead":1,"excerpt":"If you are struggling with the 406 error message which is included in title of this post you may be interested in reading the whole story…","frontmatter":{"title":"RabbitMQ amqplib - \"Error: Channel closed by server: 406 (PRECONDITION-FAILED) with message \"PRECONDITION_FAILED - unknown delivery tag 1\"","slug":"rabbitmq-406-channel-closed-precondition-failed","tags":["backend"],"date_created":"2018-07-29T04:59:48.000Z","date_updated":"2018-09-20T10:18:10.000Z","featured":false,"author":"jan","feature_image":{"absolutePath":"/Users/janek/work/github_contrib/grzegorowski.com/blog/content/posts/img/photo-1534279172812-fed91fae8966.jpg","relativePath":"posts/img/photo-1534279172812-fed91fae8966.jpg","childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABcBAAMBAAAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAYarEzzSKX//xAAaEAACAwEBAAAAAAAAAAAAAAABAgADIREi/9oACAEBAAEFAqkBlnDGXR5Sk4x3/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFREBAQAAAAAAAAAAAAAAAAAAABL/2gAIAQIBAT8BW//EABkQAQEAAwEAAAAAAAAAAAAAAAARAQIxQf/aAAgBAQAGPwK15XFbXFcf/8QAGxABAAIDAQEAAAAAAAAAAAAAAQAhEUFRMXH/2gAIAQEAAT8hK8Xkx0ArfyIQGcZUKuXAW3OJP//aAAwDAQACAAMAAAAQ6B//xAAWEQADAAAAAAAAAAAAAAAAAAABEDH/2gAIAQMBAT8QEX//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQIBAT8QUxWJ/8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFBYYH/2gAIAQEAAT8QHsatheu4sgtQOPUSgvhcNsybYLh3ARo8gDCg4yf/2Q==","aspectRatio":2,"src":"/static/2929536528310985128f48a405cf2d81/0defe/photo-1534279172812-fed91fae8966.jpg","srcSet":"/static/2929536528310985128f48a405cf2d81/38b6a/photo-1534279172812-fed91fae8966.jpg 150w,\n/static/2929536528310985128f48a405cf2d81/e201c/photo-1534279172812-fed91fae8966.jpg 300w,\n/static/2929536528310985128f48a405cf2d81/0defe/photo-1534279172812-fed91fae8966.jpg 600w,\n/static/2929536528310985128f48a405cf2d81/a71f1/photo-1534279172812-fed91fae8966.jpg 900w,\n/static/2929536528310985128f48a405cf2d81/8d595/photo-1534279172812-fed91fae8966.jpg 1080w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}},{"node":{"timeToRead":8,"excerpt":"Deprecation warning This is now deprecated! Please head to Secure Docker Grafana container with SSL through Traefik proxy which is far more…","frontmatter":{"title":"Grafana and InfluxDB with Let's Encrypt SSL on Docker","slug":"grafana-with-lets-encrypt-ssl-on-docker","tags":["docker","backend"],"date_created":"2018-02-05T22:37:16.000Z","date_updated":"2018-09-15T12:47:40.000Z","featured":false,"author":"jan","feature_image":{"absolutePath":"/Users/janek/work/github_contrib/grzegorowski.com/blog/content/posts/img/grafanadashboard-1.png","relativePath":"posts/img/grafanadashboard-1.png","childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABRUlEQVQoz6WRS1LDMBBEfQkSWMSyZ/S3/AkJJkBx/2M1I8lOCrYsXo0002q55UZ1jFNLUJ1GJ/R9pevrPveJLYgMWsVlZtjAG1vWSnpMGl4bUEdoxuDxOniM3hVhPpjNrLYI1mIKDtfkcRHNOXqsY8DnHPG1RNymKLO6/z4PSM5kw4BFhLMYT2I6OCdGTi6Q3tbPl+VZ1k1lvxHqPuW5VEOMhrVDjr1D8vk5glJU4mSsjTA2SGQqmv0pHnBJdTp1aHLE/d36IiZZG7BL0AKxgxYz5vpmRLboCv0DklmrejHkKsjGbAewibDpCje/w03CfIOVatIFdnyT9QoTz/UyHbYfVsmpGhMXMbjI4RV++ShUs/UXXoxLX9h1d/1Ue2STGPpU4pF8GZlQKpf1o+Y+/6k7976ka+U9m8PxBU+H48bzP6jnfwBqdwGmpFoLZgAAAABJRU5ErkJggg==","aspectRatio":2,"src":"/static/0bb15c5c60bd1f1b45cf89f238d3ca40/d1858/grafanadashboard-1.png","srcSet":"/static/0bb15c5c60bd1f1b45cf89f238d3ca40/eed6b/grafanadashboard-1.png 150w,\n/static/0bb15c5c60bd1f1b45cf89f238d3ca40/44052/grafanadashboard-1.png 300w,\n/static/0bb15c5c60bd1f1b45cf89f238d3ca40/d1858/grafanadashboard-1.png 600w,\n/static/0bb15c5c60bd1f1b45cf89f238d3ca40/6b4f3/grafanadashboard-1.png 900w,\n/static/0bb15c5c60bd1f1b45cf89f238d3ca40/f5d99/grafanadashboard-1.png 1200w,\n/static/0bb15c5c60bd1f1b45cf89f238d3ca40/3419a/grafanadashboard-1.png 1840w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}},{"node":{"timeToRead":1,"excerpt":"How easy is adding Google Analytics support to Grafana Docker container? It's trivial. Just add an environment variable to the Grafana…","frontmatter":{"title":"Grafana Docker container and Google Analytics","slug":"docker-grafana-google-analytics","tags":["docker","backend"],"date_created":"2017-12-20T12:39:48.000Z","date_updated":"2017-12-29T23:30:35.000Z","featured":false,"author":"jan","feature_image":{"absolutePath":"/Users/janek/work/github_contrib/grzegorowski.com/blog/content/posts/img/docker-containers.jpg","relativePath":"posts/img/docker-containers.jpg","childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABy6TZyghP/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAERECH/2gAIAQEAAQUCqRTgsZ//xAAWEQEBAQAAAAAAAAAAAAAAAAAAEQH/2gAIAQMBAT8BmI//xAAXEQADAQAAAAAAAAAAAAAAAAAAARES/9oACAECAQE/AdMrP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgMf/aAAgBAQAGPwIi/wD/xAAbEAACAgMBAAAAAAAAAAAAAAAAAREhMVFhgf/aAAgBAQABPyHEaIq4x0blrwSitEE8H//aAAwDAQACAAMAAAAQBO//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQMBAT8Qiy//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/EAv/xAAbEAEAAgIDAAAAAAAAAAAAAAABABEhUTFBcf/aAAgBAQABPxAcoa1MYI+4Vki0qAhQfSNjjiKjSf/Z","aspectRatio":2,"src":"/static/519a97714c74ce11183212fe7806cb18/0defe/docker-containers.jpg","srcSet":"/static/519a97714c74ce11183212fe7806cb18/38b6a/docker-containers.jpg 150w,\n/static/519a97714c74ce11183212fe7806cb18/e201c/docker-containers.jpg 300w,\n/static/519a97714c74ce11183212fe7806cb18/0defe/docker-containers.jpg 600w,\n/static/519a97714c74ce11183212fe7806cb18/a71f1/docker-containers.jpg 900w,\n/static/519a97714c74ce11183212fe7806cb18/9f6c3/docker-containers.jpg 1200w,\n/static/519a97714c74ce11183212fe7806cb18/e95fb/docker-containers.jpg 1280w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}},{"node":{"timeToRead":4,"excerpt":"Running InfluxDB inside Docker container is extremely easy with the official image available on Docker Hub https://hub.docker.com/_/influxdb…","frontmatter":{"title":"How to backup and restore InfluxDB which runs inside Docker container","slug":"how-to-backup-and-restore-influxdb-which-runs-inside-docker-container","tags":["docker","backend"],"date_created":"2017-11-16T15:13:50.000Z","date_updated":"2017-12-07T21:24:24.000Z","featured":false,"author":"jan","feature_image":{"absolutePath":"/Users/janek/work/github_contrib/grzegorowski.com/blog/content/posts/img/dockerized-influxdb-restore.png","relativePath":"posts/img/dockerized-influxdb-restore.png","childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABX0lEQVQoz1WReWvCQBDFc+yRY3NoDhM1Uaq1EbVQJZYipUKR0u//gV5n11rsH4+ZDbu/vHlj5dkQ81mD7mmJbrVE20wwm7Vomil2uw0Ohz0GgyE4E1BRDM8P4LocLuOmcuGDS5LwwLkHK00TVFWJdfeIj9Mrjvsdzqce/f4Z5/c3fF/O+Lp8Yrvd0CMJxoWB6V56AQTpBnTpp1YYhCjzDJN6hOm4QjMeoR7lWK8W2HZLPLQ1+sMLjsceQahIEVScIFAxpK/+gBrmkGNr3jZgLoNru3Bsh2xzcx6mEcosRUZ1MW9oigohAbOiRJQO4BNY+iHEHcw4VEoRgJuMBI3DqOqxpJSIVEjgBEkcmTF1hoMsQxhTloH650xXfbZsh1HjGQntjl0D15ds5yrHpUf0rSwK1HVlYDq/G4hxec2RGBb7JRuRMx2upE2G5FxL0KXrIgTyvEBOUN3fxPR27xbzA7KLpDXSJofxAAAAAElFTkSuQmCC","aspectRatio":2,"src":"/static/7fa76383651ee47dc9f9bae462d16217/d1858/dockerized-influxdb-restore.png","srcSet":"/static/7fa76383651ee47dc9f9bae462d16217/eed6b/dockerized-influxdb-restore.png 150w,\n/static/7fa76383651ee47dc9f9bae462d16217/44052/dockerized-influxdb-restore.png 300w,\n/static/7fa76383651ee47dc9f9bae462d16217/d1858/dockerized-influxdb-restore.png 600w,\n/static/7fa76383651ee47dc9f9bae462d16217/6b4f3/dockerized-influxdb-restore.png 900w,\n/static/7fa76383651ee47dc9f9bae462d16217/f5d99/dockerized-influxdb-restore.png 1200w,\n/static/7fa76383651ee47dc9f9bae462d16217/05be9/dockerized-influxdb-restore.png 1277w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}}]},"authors":{"edges":[{"node":{"id":"1","slug":"jan","name":"Jan Grzegorowski","bio":"Full-stack developer currently working with React / Java stack","website":"","location":"","profile_image":{"relativePath":"avatar/photo-mini.jpg","childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUEAv/EABQBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAa8+nhDphjnIF7Ah/8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAxEiMf/aAAgBAQABBQK5mUB762lg1VGvG8Udif/EABcRAQEBAQAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8BAyHJ/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAECAQE/ATUav//EABsQAQACAgMAAAAAAAAAAAAAAAECEgAQESAx/9oACAEBAAY/Agh64Wbx56u//8QAHBABAAIDAAMAAAAAAAAAAAAAAQARECExgaGx/9oACAEBAAE/IRAL6t4R+NaJW948RDMDnzHpQyxFZP/aAAwDAQACAAMAAAAQD8A8/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EGNZvP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxBJGE//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhEDFRgcH/2gAIAQEAAT8Qfyh9bKr5wsWRAIpRh0prgVXZTPUxvgwCqwb+cGlgG6ILpxBXtz//2Q==","width":30,"height":30,"src":"/static/2b64da00e4a3f2952c8d9e3a6b631208/a6b89/photo-mini.jpg","srcSet":"/static/2b64da00e4a3f2952c8d9e3a6b631208/a6b89/photo-mini.jpg 1x,\n/static/2b64da00e4a3f2952c8d9e3a6b631208/74c3b/photo-mini.jpg 1.5x,\n/static/2b64da00e4a3f2952c8d9e3a6b631208/9c097/photo-mini.jpg 2x"}}},"profile_image_large":{"relativePath":"avatar/photo-mini.jpg","childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUEAv/EABQBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAa8+nhDphjnIF7Ah/8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAxEiMf/aAAgBAQABBQK5mUB762lg1VGvG8Udif/EABcRAQEBAQAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8BAyHJ/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAECAQE/ATUav//EABsQAQACAgMAAAAAAAAAAAAAAAECEgAQESAx/9oACAEBAAY/Agh64Wbx56u//8QAHBABAAIDAAMAAAAAAAAAAAAAAQARECExgaGx/9oACAEBAAE/IRAL6t4R+NaJW948RDMDnzHpQyxFZP/aAAwDAQACAAMAAAAQD8A8/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EGNZvP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxBJGE//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhEDFRgcH/2gAIAQEAAT8Qfyh9bKr5wsWRAIpRh0prgVXZTPUxvgwCqwb+cGlgG6ILpxBXtz//2Q==","width":60,"height":60,"src":"/static/2b64da00e4a3f2952c8d9e3a6b631208/9c097/photo-mini.jpg","srcSet":"/static/2b64da00e4a3f2952c8d9e3a6b631208/9c097/photo-mini.jpg 1x,\n/static/2b64da00e4a3f2952c8d9e3a6b631208/c5aad/photo-mini.jpg 1.5x"}}}}}]},"tags":{"edges":[{"node":{"id":"5b982ddf16b0a81519316f7b","name":"Backend","slug":"backend"}},{"node":{"id":"5b982ddf16b0a81519316f7d","name":"Docker","slug":"docker"}}]},"tagPosts":{"edges":[{"node":{"frontmatter":{"title":"Grafana and InfluxDB with Let's Encrypt SSL on Docker","slug":"grafana-with-lets-encrypt-ssl-on-docker","date_created":"2018-02-05T22:37:16.000Z","featured":false}}},{"node":{"frontmatter":{"title":"Grafana Docker container and Google Analytics","slug":"docker-grafana-google-analytics","date_created":"2017-12-20T12:39:48.000Z","featured":false}}},{"node":{"frontmatter":{"title":"How to backup and restore InfluxDB which runs inside Docker container","slug":"how-to-backup-and-restore-influxdb-which-runs-inside-docker-container","date_created":"2017-11-16T15:13:50.000Z","featured":false}}},{"node":{"frontmatter":{"title":"Docker with Xdebug a final guide with troubleshooting tips","slug":"docker-with-xdebug-and-vdebug","date_created":"2017-06-01T22:40:40.000Z","featured":false}}}],"totalCount":6}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"secure-docker-grafana-container-with-ssl-through-traefik-proxy","tags":["docker","backend"],"author":"jan","mainTag":"docker","prev":{"frontmatter":{"slug":"custom-jest-transformer","tags":["javascript","webpack"],"author":"jan"}},"next":{"frontmatter":{"slug":"electron-open-in-new-window","tags":["javascript"],"author":"jan"}},"isAmp":true}}}