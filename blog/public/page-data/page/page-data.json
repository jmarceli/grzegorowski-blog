{"componentChunkName":"component---gatsby-ghost-theme-src-templates-page-js","path":"/page/","webpackCompilationHash":"9a15a96c2c6723dc956d","result":{"data":{"post":{"html":"<p>You want to check how (or if) your application works with SSL encryption without exposing it to the Internet? Use a self-signed SSL certificate with the Traefik proxy server inside the intranet (or other LAN with restricted access).</p>\n<p><strong>TLDR;</strong> Clone this repo and adjust content of <strong>traefik.toml</strong> file <a href=\"https://github.com/jmarceli/traefik-self-signed-ssl-proxy\">https://github.com/jmarceli/traefik-self-signed-ssl-proxy</a></p>\n<h2>Start</h2>\n<p><a href=\"https://docs.traefik.io/\">Traefik</a> is becoming more and more popular thanks to its configuration simplicity and rich features available out of the box. Here is how it can be used to ensure self-signed SSL certificate for selected application server.</p>\n<h3>Overview</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 751px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/75e4f14247faf096e98b3044469792ad/0898f/traefik-ssl-proxy.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.05326231691078%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACKUlEQVQoz4WSaU8aURSG/fFNmvSzTZqYJq02cYnthyogRoNWizALi6AWFxRmZVERGZRtnp5hEGnSph/enDt37n3Oe+45c5ABtKl8/yXqDEcZRn6GeiNBo5mgP1BlT2cw1Mcx+PcqXe7kmAtB6li+HypYX93eUnR7nNWfOL8bcHE/RLtusK0USOQvyZptirVnCu7TWHmnR8OrzAJDdyFQkwNdYhcQPR+ycfrM5ll/HDd+Ddi+8FFMplJFR1Ww2u7fgOG3YnksKLD4s8f7aI35qMuH7SZLKfiSkxOWjzajtAF22/63w2SlxUYajk9GHOr37KcbJHNtsgVxnPVJmSFINWeBDnMvkBd3/gT+9SDLcvyO7MMdm4ZG9CZLxNBRbxsC5H/AGQWOJcHWcYW1hEfWfWDPuiZxUx5HzWrxfQLUJ+Xqs8Cw3NRE6WnJiiONkGXy2iZ2VWTr/JTYZZHDsjN1GDQjJaAAlqxOgN1+EbdjUvNMafvNeJ6CJEdGh015w0y9zlYlR7ycJ17Nodg1ItIUxYb1os+CNuKjNuCzJDEeBOg+muxfQaLURTUG9IbHAlQ4Mjusien9yxaRkkmsZMsImeyWWnwTYDzv8HZV503E5t1Ok/lk/xX4Q4B7pac/gKr1zFIeVuXyWv5Vy+Jk/QR2Th75dFBnMeOzUoSVQuBQ5tDrn8pA2jiPDrVOdVpy0yvjjPdNkTGJoQITbseh3nVlbeG2TXk/C69f4jcQOWhaTI9rdgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Traefik-SSL-proxy\"\n        title=\"Traefik-SSL-proxy\"\n        src=\"/static/75e4f14247faf096e98b3044469792ad/0898f/traefik-ssl-proxy.png\"\n        srcset=\"/static/75e4f14247faf096e98b3044469792ad/a1986/traefik-ssl-proxy.png 210w,\n/static/75e4f14247faf096e98b3044469792ad/ad7fb/traefik-ssl-proxy.png 420w,\n/static/75e4f14247faf096e98b3044469792ad/0898f/traefik-ssl-proxy.png 751w\"\n        sizes=\"(max-width: 751px) 100vw, 751px\"\n      />\n  </a>\n    </span></p>\n<p>Things to check before starting:</p>\n<ul>\n<li><strong>Your device</strong> - should have access to <strong>Development server</strong> using a custom domain name e.g. <strong>my.test</strong>, you can set it using the <strong>/etc/hosts</strong> file (on Unix systems), <strong>dnsmasq</strong> or directly in the network router, if you have access to its configuration (if you can't do that please read <a href=\"#tips\">#Tips</a> section to adjust your <strong>traefik.toml</strong> TLS configuration)</li>\n<li><strong>Development server</strong> - if necessary, adjust system firewall configuration and open the required ports (ports <strong>4000</strong> and <strong>8080</strong> should be available for Intranet/LAN connections)</li>\n<li><strong>Application server</strong> - make sure it works and is available from <strong>Development server</strong> on port <strong>5000</strong></li>\n</ul>\n<p>Request to <strong>my.test:4000</strong> made from <strong>Your device</strong> is supposed to go through the following path:</p>\n<ul>\n<li>access <strong>Development server</strong> (via some domain resolution mechanism e.g. <strong>/etc/hosts</strong> on <strong>Your device</strong>)</li>\n<li>go through opened <strong>4000</strong> port</li>\n<li><strong>Traefik</strong> Docker container should handle that request thanks to the exposed <strong>4000</strong> port</li>\n<li>Traefik <strong>httpSSL</strong> entryPoint should be set to <strong>4000</strong> port and handle the request</li>\n<li>Traefik <strong>frontend1</strong> should \"redirect\" request to <strong>backend1</strong></li>\n<li>Traefik <strong>backend1</strong> should respond with a content from <strong>Application server</strong></li>\n</ul>\n<h3>File structure</h3>\n<p>Here is the final files structure you should generate by following the next steps.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">./\n./certs/cert.crt\n./crets/cert.key\n./traefik.toml\n./docker-compose.yml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Self-signed certificate files</h3>\n<p>You will need a <strong>.key</strong> and <strong>.crt</strong> files. They can be generated for self-signed certificates using the <code class=\"language-text\">openssl</code>. If you don't have it already, please check on Google (<code class=\"language-text\">brew install openssl</code> for Mac OS X with Homebrew packages manager). With the <code class=\"language-text\">openssl</code> ready to use execute:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">openssl req -x509 -nodes -days <span class=\"token number\">365</span> -newkey rsa:2048 -keyout cert.key -out cert.crt</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>The only important question while running the <code class=\"language-text\">openssl</code> command is <strong>Common Name (e.g. server FQDN or YOUR name):</strong>. It should match the domain name of your server e.g. <code class=\"language-text\">*.test</code> or <code class=\"language-text\">my.test</code> (or any other that you can point to your server), wildcards (<code class=\"language-text\">*</code>) are allowed.</p>\n<p>After preparing the certificate files, you must change their access rights.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">chmod</span> <span class=\"token number\">644</span> cert.crt\n<span class=\"token function\">chmod</span> <span class=\"token number\">600</span> cert.key</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>It's done, now you may proceed to the next step.</p>\n<h3>Traefik configuration traefik.toml</h3>\n<p>Most Traefik configurations will be placed inside the <strong>traefik.toml</strong> file. Here is the final result.</p>\n<div class=\"gatsby-highlight\" data-language=\"toml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-toml line-numbers\"><code class=\"language-toml\"><span class=\"token key property\">debug</span> <span class=\"token punctuation\">=</span> <span class=\"token boolean\">true</span>\n<span class=\"token key property\">logLevel</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"DEBUG\"</span>\n<span class=\"token key property\">defaultEntryPoints</span> <span class=\"token punctuation\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"httpSSL\"</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token table class-name\">web</span><span class=\"token punctuation\">]</span>\n<span class=\"token key property\">address</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\":8080\"</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token table class-name\">entryPoints</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">[</span><span class=\"token table class-name\">entryPoints.httpSSL</span><span class=\"token punctuation\">]</span>\n  <span class=\"token key property\">address</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\":4000\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token table class-name\">entryPoints.httpSSL.tls</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token table class-name\">file</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token table class-name\">backends</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">[</span><span class=\"token table class-name\">backends.backend1</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">[</span><span class=\"token table class-name\">backends.backend1.servers</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">[</span><span class=\"token table class-name\">backends.backend1.servers.server0</span><span class=\"token punctuation\">]</span>\n        <span class=\"token key property\">url</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"http://192.168.0.16:5000\"</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token table class-name\">frontends</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">[</span><span class=\"token table class-name\">frontends.frontend1</span><span class=\"token punctuation\">]</span>\n  <span class=\"token key property\">entryPoints</span> <span class=\"token punctuation\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"httpSSL\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token key property\">backend</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"backend1\"</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token table class-name\">tls</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n  <span class=\"token key property\">entryPoints</span> <span class=\"token punctuation\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"httpSSL\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">[</span><span class=\"token table class-name\">tls.certificate</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key property\">certFile</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"/certs/cert.crt\"</span>\n    <span class=\"token key property\">keyFile</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"/certs/cert.key\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Useful information:</p>\n<ul>\n<li><strong>debug</strong> and <strong>logLevel</strong> - It should be self-explanatory</li>\n<li><strong>defaultEntryPoints</strong> - Specifies that by default Traefik server will expose extrypoint named <strong>httpSSL</strong> (it can be <strong>any</strong> string, just be consistent if you want to change it)</li>\n<li><strong>[web]</strong> - This section might be omitted, it will provide administrative/diagnostic panel on the selected <strong>8080</strong> port</li>\n<li><strong>[entryPoints]</strong> - Defines default entrypoint <strong>httpSSL</strong> and assings port <strong>4000</strong> to it. It also ensures <strong>tls</strong> encryption (<a href=\"https://tools.ietf.org/html/rfc7568\">TLS is \"safer\" SSL</a>)</li>\n<li><strong>[file]</strong> - This one is tricky, because it does not look as important as it is, thanks to that section Traefik uses <strong>traefik.toml</strong> <a href=\"https://docs.traefik.io/v1.5/configuration/backends/file/\">file as a backend definitions provider</a></li>\n<li><strong>[backends]</strong> - All available backends names (which is only one <strong>backend1</strong> in this example) with <strong><a href=\"http://192.168.0.16:5000\">http://192.168.0.16:5000</a></strong> as a proxy target (<strong><a href=\"http://192.168.0.16:5000\">http://192.168.0.16:5000</a></strong> is an IP address of a running Application server)</li>\n<li><strong>[frontends]</strong> - Frontends configuration, where <strong>frontend1</strong> is the name (which can be changed at any time), <strong>entryPoints</strong> and <strong>backend</strong> keys link entry point with a backend for given frontend, <strong>rule</strong> tells Traefik which domains it should handle with that frontend</li>\n<li><strong>[[tls]]</strong> - Assign generated cert and key files to the selected <strong>entryPoint</strong> (which is <strong>httpSSL</strong> in this case)</li>\n</ul>\n<h3>It's Docker time</h3>\n<p>With <strong>traefik.toml</strong> in place it's time to go to the Docker configuration. The simplest (at least for me) solution is to write the <strong>docker-compose.yml</strong> file. Here's how it can look.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3\"</span>\n\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">traefik</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> traefik<span class=\"token punctuation\">:</span>1.7.0\n    <span class=\"token key atrule\">networks</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> public\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> 4000<span class=\"token punctuation\">:</span><span class=\"token number\">4000</span>\n      <span class=\"token punctuation\">-</span> 8080<span class=\"token punctuation\">:</span><span class=\"token number\">8080</span>\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> ./traefik.toml<span class=\"token punctuation\">:</span>/traefik.toml\n      <span class=\"token punctuation\">-</span> ./certs/<span class=\"token punctuation\">:</span>/certs/\n      <span class=\"token punctuation\">-</span> /var/run/docker.sock<span class=\"token punctuation\">:</span>/var/run/docker.sock\n\n<span class=\"token key atrule\">networks</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">public</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">driver</span><span class=\"token punctuation\">:</span> bridge</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Let's start from the beginning:</p>\n<ul>\n<li><strong>version</strong> - Specifies the syntax of the Docker configuration used</li>\n<li><strong>services</strong> - A list of Docker containers to create</li>\n<li><strong>traefik</strong> - The only service to create</li>\n<li><strong>image</strong> - Image for <strong>traefik</strong> service creation (<strong>1.7.0</strong> is the current stable version at the time of writing)</li>\n<li><strong>network</strong> - The name of the network which will be used does not matter, as long as it uses the <strong>bridge</strong> driver defined at the end of configuration in <strong>networks</strong> section</li>\n<li><strong>ports</strong> - Exposes <strong>4000</strong> port which will be proxied with SSL and <strong>8080</strong> for debugging and diagnostic</li>\n<li><strong>volumes</strong> - Files and folders mounted to the created container, you should be familiar with all of them except <strong>/var/run/docker.sock</strong> which allows <strong>traefik</strong> container to <a href=\"https://stackoverflow.com/questions/35110146/can-anyone-explain-docker-sock/35110344\">use Docker API</a></li>\n</ul>\n<h3>Show time</h3>\n<p>When everything is in place, it's easy to shine :)\nExecute:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker-compose up</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Visit <a href=\"http://192.168.0.16:8080\">http://192.168.0.16:8080</a> to check the configuration. Here is how it may look like.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 751px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/75e4f14247faf096e98b3044469792ad/0898f/traefik-ssl-proxy.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.05326231691078%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACKUlEQVQoz4WSaU8aURSG/fFNmvSzTZqYJq02cYnthyogRoNWizALi6AWFxRmZVERGZRtnp5hEGnSph/enDt37n3Oe+45c5ABtKl8/yXqDEcZRn6GeiNBo5mgP1BlT2cw1Mcx+PcqXe7kmAtB6li+HypYX93eUnR7nNWfOL8bcHE/RLtusK0USOQvyZptirVnCu7TWHmnR8OrzAJDdyFQkwNdYhcQPR+ycfrM5ll/HDd+Ddi+8FFMplJFR1Ww2u7fgOG3YnksKLD4s8f7aI35qMuH7SZLKfiSkxOWjzajtAF22/63w2SlxUYajk9GHOr37KcbJHNtsgVxnPVJmSFINWeBDnMvkBd3/gT+9SDLcvyO7MMdm4ZG9CZLxNBRbxsC5H/AGQWOJcHWcYW1hEfWfWDPuiZxUx5HzWrxfQLUJ+Xqs8Cw3NRE6WnJiiONkGXy2iZ2VWTr/JTYZZHDsjN1GDQjJaAAlqxOgN1+EbdjUvNMafvNeJ6CJEdGh015w0y9zlYlR7ycJ17Nodg1ItIUxYb1os+CNuKjNuCzJDEeBOg+muxfQaLURTUG9IbHAlQ4Mjusien9yxaRkkmsZMsImeyWWnwTYDzv8HZV503E5t1Ok/lk/xX4Q4B7pac/gKr1zFIeVuXyWv5Vy+Jk/QR2Th75dFBnMeOzUoSVQuBQ5tDrn8pA2jiPDrVOdVpy0yvjjPdNkTGJoQITbseh3nVlbeG2TXk/C69f4jcQOWhaTI9rdgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"traefik-ssl-proxy\"\n        title=\"traefik-ssl-proxy\"\n        src=\"/static/75e4f14247faf096e98b3044469792ad/0898f/traefik-ssl-proxy.png\"\n        srcset=\"/static/75e4f14247faf096e98b3044469792ad/a1986/traefik-ssl-proxy.png 210w,\n/static/75e4f14247faf096e98b3044469792ad/ad7fb/traefik-ssl-proxy.png 420w,\n/static/75e4f14247faf096e98b3044469792ad/0898f/traefik-ssl-proxy.png 751w\"\n        sizes=\"(max-width: 751px) 100vw, 751px\"\n      />\n  </a>\n    </span></p>\n<p>Then open <a href=\"https://my.test:4000\">https://my.test:4000</a> to admire the results of your hard work.</p>\n<p>You can verify if certificate works by clicking on \"Not Secure\" info in Google Chrome address bar. Details should match those provided during cert generation.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 468px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/17ae3e393b262eea69a3cee49459ab0d/3f263/self-signed-my-test-certificate.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98.2905982905983%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAACs0lEQVQ4y61US4vTUBTuLxZduNONbgZ0IwjiLARx5QNkdNRZDDMrFQTn0Xb6SpsmaZomuXk2bd7t57m3dqad1oEBL3yccJJ85zuvW3l9UMXzAxXPvql4sq/cGk+/KNj5rODloQZlYKDyau8MO18ZHu07uPvexr3b4oONO+9sPNwz0ZBUVPCfTprlqLV6qGjWGJoVQjEJo4CsT9aHPHQhG66wXZ1dPq/Zv1BGHtqqjfNGG5XYPYFnniHx6wgcA/2+Atu2bq1wGseockIm/YSuqmCDYxhKE622hF5PhtzvE7kKWVbAmIMoihCEIcbjMXzfRxCECMMxkiRZJ3S6v2BKP6DX34ANB+h1ZWgUoCt1ocp9qKTYYQwRkQVENA45obcgJKwRNjuozOZAHCcoZuSlDwtdQ2noKJmFUutjNhoCngs49gL/TDlZEOZ5huFwCNMcIU0zFGUpsDw8zmw+v8JstoErhdL62KRpCs/z4DiUItUqTZMNJXMivY4NQu7jZK7rUodtMILjOFCplryePEhJqvOiuCRYDXCV8orCosgxMgwYBMs0icRHp9MRYzTQNFiWKYJleb6hdCshVxhSmpNoIkaEN8qyLGRZduP8bSVcOnOKHlMtOJbFFo0RxS+3NuSfTSmoPnym+MyZlDKvp+M6SMm3Sr6tMVubkmWpIDIpTd4U1/VoS/qQJAm6rosNCWm4eeCtNZxeU1jSh4zU8cK7NDacQO71xNqFQUCbEQjfdbXLEyfZgjDgq0Qr5JAim7nCModbnxRb8IgooujRZCoQhBF88c8YcRQgm/jIphTMZwvCk2oDCzRxWmvipLZi6y2yDfzm74WvtfDV26g1mnj7nW76QxMvjkzsHg9x2iDC84s2bgTdINVGR+wpV8BxTj+2aEZ3jwzc/+jjwScfj/cZTi8k/AGyadN+97XliAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"self-signed-my-test-certificate\"\n        title=\"self-signed-my-test-certificate\"\n        src=\"/static/17ae3e393b262eea69a3cee49459ab0d/3f263/self-signed-my-test-certificate.png\"\n        srcset=\"/static/17ae3e393b262eea69a3cee49459ab0d/a1986/self-signed-my-test-certificate.png 210w,\n/static/17ae3e393b262eea69a3cee49459ab0d/ad7fb/self-signed-my-test-certificate.png 420w,\n/static/17ae3e393b262eea69a3cee49459ab0d/3f263/self-signed-my-test-certificate.png 468w\"\n        sizes=\"(max-width: 468px) 100vw, 468px\"\n      />\n  </a>\n    </span></p>\n<h2>Tips</h2>\n<h3>You can't set a custom domain name for your development server and you need to use it's IP address</h3>\n<p>Use following <strong>entryPoints</strong> configuration:</p>\n<div class=\"gatsby-highlight\" data-language=\"toml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-toml line-numbers\"><code class=\"language-toml\"><span class=\"token punctuation\">[</span><span class=\"token table class-name\">entryPoints</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">[</span><span class=\"token table class-name\">entryPoints.httpSSL</span><span class=\"token punctuation\">]</span>\n  <span class=\"token key property\">address</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\":4000\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token table class-name\">entryPoints.httpSSL.tls</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">[</span><span class=\"token table class-name\">entryPoints.httpSSL.tls.defaultCertificate</span><span class=\"token punctuation\">]</span>\n      <span class=\"token key property\">certFile</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"/certs/cert.crt\"</span>\n      <span class=\"token key property\">keyFile</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"/certs/cert.key\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Thanks to that step you will use your own certificate (generated in <a href=\"#self-signed-certificate-files\">#Self-signed certificate files</a> step) as a default one.</p>\n<h3>Application server address 192.168.0.16</h3>\n<p>It doesn't have to be your Development server IP visible on LAN. It can be also an internal IP visible from Docker which is usally something like <strong>172.17.0.1</strong>. You should be able to check that using <strong>ifconfig</strong> (look for <strong>docker0</strong> interface), in case you are using <strong>Docker for Mac</strong> you may also use <strong>host.docker.internal</strong> <a href=\"https://docs.docker.com/docker-for-mac/networking/#use-cases-and-workarounds\">see the docs</a>.</p>\n<h2>Troubleshooting</h2>\n<p>Check the output after executing the <code class=\"language-text\">docker-compose up</code> command.</p>\n<p>If you want to restart the created container with the new/changed configuration inside <strong>traefik.toml</strong> file, press <code class=\"language-text\">Ctrl-c</code>, and then execute <code class=\"language-text\">docker-compose down &amp;&amp; docker-compose up</code> to make sure that old container has been properly destroyed.</p>\n<p><code class=\"language-text\">502 Bad gateway</code> instead of your requested/proxied content probably means that you have made a simple error in the <strong>traefik.toml</strong> configuration. Watch out for typos and renaming (if you choose to change some names).</p>\n<p>Start with minimal modifications. Just copy and paste the example content to files and adjust only the URLs. Start it. You will be renaming everything (frontends, backends, entryPoints, containers, networks etc.) later, after the first successful start.</p>\n<p>Some explanations regarding the Traefik log messages:</p>\n<ul>\n<li><code class=\"language-text\">Serving default cert for request: ...</code> - you probably give an incorrect FQDN when generating a self-signed certificate using <code class=\"language-text\">openssl</code></li>\n<li><code class=\"language-text\">Error loading new configuration, aborted unable to generate TLS certificate : tls: failed to find any PEM data in certificate input</code> - check the path to your certificate files specified in the <strong>traefik.toml</strong> file, it is probably icorrect</li>\n</ul>\n<p>Be patient and read this guide again... (if necessary)</p>\n<h2>Why</h2>\n<p>Because I did not find such an example when I needed it.</p>\n<p>After some adjustment, you can use this configuration in production with Let's Encrypt SSL certificate instead of self-signed. I'm going to write something about it later and link it here.</p>\n<h2>Sources</h2>\n<p><a href=\"https://tools.ietf.org/html/rfc7568\">https://tools.ietf.org/html/rfc7568</a> - SSLv3 deprecation in favour of TLS 1.2\n<a href=\"https://stackoverflow.com/questions/35110146/can-anyone-explain-docker-sock/35110344\">https://stackoverflow.com/questions/35110146/can-anyone-explain-docker-sock/35110344</a> - info about docker.sock\n<a href=\"https://hub.docker.com/_/traefik/\">https://hub.docker.com/_/traefik/</a> - Traefik Docker image\n<a href=\"https://docs.traefik.io/\">https://docs.traefik.io/</a> - Traefik Documenation, which should be the most up-to-date source of knowledge\n<a href=\"https://docs.docker.com/docker-for-mac/networking/#use-cases-and-workarounds\">https://docs.docker.com/docker-for-mac/networking/#use-cases-and-workarounds</a> - Docker docs</p>","excerpt":"You want to check how (or if) your application works with SSL encryption without exposing it to the Internet? Use a self-signed SSLâ€¦","timeToRead":8,"frontmatter":{"author":"jan","feature_image":{"absolutePath":"/Users/janek/work/github_contrib/grzegorowski.com/blog/content/posts/img/photo-1512168203104-3910bc2bcd54.jpg","relativePath":"posts/img/photo-1512168203104-3910bc2bcd54.jpg","childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAeABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAECAwQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAe0nkjUMDNfAtIB//8QAGRAAAwEBAQAAAAAAAAAAAAAAAAECEBEx/9oACAEBAAEFAtfkNuhkzyh7/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFxAAAwEAAAAAAAAAAAAAAAAAAREgMP/aAAgBAQAGPwKA8P/EABoQAAIDAQEAAAAAAAAAAAAAAAARARBBITH/2gAIAQEAAT8hm/YxonXgndldR0S0cn//2gAMAwEAAgADAAAAEL//AMP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAbEAADAQADAQAAAAAAAAAAAAAAARExECFRQf/aAAgBAQABPxCh3wQuWkmR4R7843S0Q/CbnCqXZDZumQoaf//Z","aspectRatio":0.6670784434836319,"src":"/static/d82df298cb57c0123e8c64bd116c3d65/90537/photo-1512168203104-3910bc2bcd54.jpg","srcSet":"/static/d82df298cb57c0123e8c64bd116c3d65/6ece9/photo-1512168203104-3910bc2bcd54.jpg 480w,\n/static/d82df298cb57c0123e8c64bd116c3d65/0a89a/photo-1512168203104-3910bc2bcd54.jpg 960w,\n/static/d82df298cb57c0123e8c64bd116c3d65/90537/photo-1512168203104-3910bc2bcd54.jpg 1080w","sizes":"(max-width: 1080px) 100vw, 1080px"}}},"title":"Traefik - proxy development server with self-signed SSL certificate","slug":"traefik-proxy-development-server-self-signed-ssl","tags":["backend","tools"],"date_created":"2018-11-07T19:08:02.000Z","date_updated":"2018-11-08T18:16:57.000Z","featured":false}},"authors":{"edges":[{"node":{"id":"1","slug":"jan","bio":"Full-stack developer currently working with React / Java stack","name":"Jan Grzegorowski","website":"","location":"","profile_image":{"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUEAv/EABQBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAa8+nhDphjnIF7Ah/8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAxEiMf/aAAgBAQABBQK5mUB762lg1VGvG8Udif/EABcRAQEBAQAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8BAyHJ/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAECAQE/ATUav//EABsQAQACAgMAAAAAAAAAAAAAAAECEgAQESAx/9oACAEBAAY/Agh64Wbx56u//8QAHBABAAIDAAMAAAAAAAAAAAAAAQARECExgaGx/9oACAEBAAE/IRAL6t4R+NaJW948RDMDnzHpQyxFZP/aAAwDAQACAAMAAAAQD8A8/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EGNZvP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxBJGE//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhEDFRgcH/2gAIAQEAAT8Qfyh9bKr5wsWRAIpRh0prgVXZTPUxvgwCqwb+cGlgG6ILpxBXtz//2Q==","width":60,"height":60,"src":"/static/2b64da00e4a3f2952c8d9e3a6b631208/9c097/photo-mini.jpg","srcSet":"/static/2b64da00e4a3f2952c8d9e3a6b631208/9c097/photo-mini.jpg 1x,\n/static/2b64da00e4a3f2952c8d9e3a6b631208/c5aad/photo-mini.jpg 1.5x"}}}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":true}}}