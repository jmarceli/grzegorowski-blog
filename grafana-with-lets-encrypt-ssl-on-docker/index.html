<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, shrink-to-fit=no"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="amphtml" href="https://www.grzegorowski.com/grafana-with-lets-encrypt-ssl-on-docker/amp/"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:137.5%/1.6 'georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'georgia',serif;font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}ul{margin-left:1.6rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.6rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;font-size:0.85rem;line-height:1.6rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;font-size:1rem;line-height:1.6rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}blockquote{margin-left:1.6rem;margin-right:1.6rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.6rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.6rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.6rem;margin-bottom:calc(1.6rem / 2);margin-top:calc(1.6rem / 2);}li > ul{margin-left:1.6rem;margin-bottom:calc(1.6rem / 2);margin-top:calc(1.6rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.6rem / 2);}code{font-size:0.85rem;line-height:1.6rem;}kbd{font-size:0.85rem;line-height:1.6rem;}samp{font-size:0.85rem;line-height:1.6rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.06667rem;padding-right:1.06667rem;padding-top:0.8rem;padding-bottom:calc(0.8rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><link rel="apple-touch-icon" sizes="152x152" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-icon-152x152.png"/><title data-react-helmet="true">Grafana and InfluxDB with Let&#x27;s Encrypt SSL on Docker</title><meta data-react-helmet="true" name="description" content="It seems extremely easy to do if you know all required Docker containers, but it&#x27;s not so obvious if you are not a fluent Docker user.Updateâ€¦"/><meta data-react-helmet="true" name="author" content="Jan Grzegorowski"/><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","publisher":{"@type":"Organization","logo":{"type":"ImageObject","url":"https://grzegorowski.com/favicon.ico"}},"author":{"@type":"Person"},"headline":"Grafana and InfluxDB with Let's Encrypt SSL on Docker","description":"It seems extremely easy to do if you know all required Docker containers, but it's not so obvious if you are not a fluent Docker user.Updateâ€¦","datePublished":"2018-02-05T22:37:16.000Z","dateModified":"2018-09-15T12:47:40.000Z","keywords":"docker, backend","image":[{"@type":"ImageObject","url":"https://grzegorowski.com/posts/img/grafanadashboard-1.png"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://grzegorowski.com/"},"articleBody":"It seems extremely easy to do if you know all required Docker containers, but it's not so obvious if you are not a fluent Docker user.\n\n## Update!\nDespite the fact that LE will automatically regenerate certificate files there is no way (which I'm aware of) to trigger Influx container restart in order to use regenerated certificate files. The only workaround is setting `REUSE_PRIVATE_KEYS=true` environment variable for **letsencrypt** container. See updated post for more details.\n\nHere is what it takes to create SSL secured **Grafana + InfluxDB** Docker setup:\n\n- Grafana (https://hub.docker.com/r/grafana/grafana/)\n- InfluxDB (https://hub.docker.com/_/influxdb/)\n- Nginx-proxy (https://hub.docker.com/r/jwilder/nginx-proxy/)\n- Let's Encrypt Nginx-proxy companion (https://hub.docker.com/r/jrcs/letsencrypt-nginx-proxy-companion/)\n\nThe additional benefit of this setup is certificate autogeneration and auto-renewal (no more worries/downtime related to expired Let's Encrypt certificate.\n\nRequired tools:\n\n- docker (https://www.docker.com/)\n- docker-compose (https://docs.docker.com/compose/install/ eases multi-container setup and removal operations)\n\n## Spoiler\nCreate **docker-compose.yml** file with the content similar to the example below and execute **docker-compose up -d** command in the directory where your **yml** file is saved.\nHere is the example content of **docker-compose.yml** with some comments related to the required modifications/adjustments (don't worry about the file length, feel free to skip this section and continue reading starting from Architecture description):\n\n```yaml\nversion: '2'\n\nservices:\n  grafana:\n    image: grafana/grafana:5.0.0 # or probably any other version\n    container_name: grafana\n    restart: always\n    environment:\n      - VIRTUAL_HOST=YOUR.DOMAIN.TEST # adjust to match your domain name\n      - VIRTUAL_PROTO=https\n      - VIRTUAL_PORT=3000\n      - LETSENCRYPT_HOST=YOUR.DOMAIN.TEST # adjust to match your domain name\n      - LETSENCRYPT_EMAIL=YOUR.EMAIL@ADDRESS.TEST # adjust to match your email\n\n      - GF_SERVER_CERT_FILE=/etc/letsencrypt/certs/YOUR.DOMAIN.TEST.crt # adjust to match your domain name\n      - GF_SERVER_CERT_KEY=/etc/letsencrypt/certs/YOUR.DOMAIN.TEST.key # adjust to match your domain name\n      - GF_SERVER_PROTOCOL=https\n\n      - GF_SERVER_DOMAIN=YOUR.DOMAIN.TEST # adjust to match your domain name\n      - GF_SECURITY_ADMIN_USER=SECURE_USERNAME # adjust to create Grafana admin account\n      - GF_SECURITY_ADMIN_PASSWORD=SECURE_PASS # adjust to set Grafana admin password\n    volumes:\n      - ./letsencrypt/certs:/etc/letsencrypt/certs:ro\n\n      - grafana-data:/var/lib/grafana\n\n  influx:\n    image: influxdb:1.4.2 # or any other recent version\n    container_name: influx\n    restart: always\n    volumes:\n      - influx-data:/var/lib/influxdb\n\n      - ./letsencrypt/certs:/etc/letsencrypt/certs:ro\n    ports:\n      - \"8086:8086\"\n    environment:\n      # might be used someday when issue #59 will be resolved/merged\n      #- VIRTUAL_HOST=YOUR.DOMAIN.TEST:8086\n      #- VIRTUAL_PROTO=https\n      #- VIRTUAL_PORT=8086\n\n      - INFLUXDB_HTTP_HTTPS_ENABLED=true\n      - INFLUXDB_HTTP_HTTPS_CERTIFICATE=/etc/letsencrypt/certs/YOUR.DOMAIN.TEST.crt # adjust to match your domain name\n      - INFLUXDB_HTTP_HTTPS_PRIVATE_KEY=/etc/letsencrypt/certs/YOUR.DOMAIN.TEST.key # adjust to match your domain name\n\n      - INFLUXDB_DB=SOME_DB_NAME # set any other to create database on initialization\n      - INFLUXDB_HTTP_ENABLED=true\n      - INFLUXDB_HTTP_AUTH_ENABLED=true\n\n      - INFLUXDB_ADMIN_USER=SECURE_USERNAME # adjust to create InfluxDB admin account\n      - INFLUXDB_ADMIN_PASSWORD=SECURE_PASS # adjust to create InfluxDB admin password\n\n  # Containers below ensures automatic cert creation and renewal\n  nginx:\n    image: jwilder/nginx-proxy:0.6.0\n    container_name: nginx\n    restart: always\n    labels:\n      - com.github.jrcs.letsencrypt_nginx_proxy_companion.nginx_proxy\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - /var/run/docker.sock:/tmp/docker.sock:ro\n      - ./nginx/html:/usr/share/nginx/html\n      - ./nginx/vhost.d:/etc/nginx/vhost.d\n      - ./letsencrypt/certs:/etc/nginx/certs:ro\n  letsencrypt:\n    image: jrcs/letsencrypt-nginx-proxy-companion:v1.7\n    container_name: letsencrypt\n    restart: always\n    volumes_from:\n      - nginx\n    volumes:\n      - ./letsencrypt/certs:/etc/nginx/certs:rw\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n    environment:\n      - REUSE_PRIVATE_KEYS=true\n\nvolumes:\n  influx-data:\n    driver: local\n  grafana-data:\n    driver: local\n```\n\nThat's all. Just replace:\n\n- **YOUR.DOMAIN.TEST**  - appropriate domain name\n- **YOUR.EMAIL@ADDRESS.TEST** - your email address\n- **SECURE_USERNAME** - some username\n- **SECURE_PASS** - secure password for the user\n\nAfter executing **docker-compose up -d** you SSLed **Grafana + Influx** stack should be available over **https://YOUR.DOMAIN.TEST** and **https://YOUR.DOMAIN.TEST:8086**. It may take a couple of minutes on the first run because of Let's Encrypt certificate generation.\n\nAs an \"extra\" benefit the Nginx ensures [HSTS headers](https://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security) for SSLed service, which basically means that all requests have to be done using an encrypted connection (the browser will force `https://` at the beginning of the address).\n\n## Architecture\n\nAs we know by default Docker creates it's own subnetwork for running containers and communication between them. Here is how it looks in the above example.\n\n![Influx-Grafana-Let's Encrypt SSL](img/influx-grafna-ssl-2.svg)\n\n**NOTE 1: Influx URL**.\nInside Grafana data sources panel you will have to define your Influx URL using a fully qualified domain name ([FQDN](https://en.wikipedia.org/wiki/Fully_qualified_domain_name) e.g. https://YOUR.DOMAIN.TEST:8086) and not internal Docker subnetwork alias e.g. influx. This is due to the fact that SSL certificate will work with Influx only if it is accessed through the URL for which certificate was requested.\n\n**NOTE 2: Grafana port**. In this setup Grafana still uses its default 3000 port, the redirection from 80 and 443 ports is handled by the Nginx proxy server.\n\n**NOTE 3: Influx without proxy**. As you may notice InfluxDB connections doesn't go through Nginx. That fact is caused by the Nginx env variables configuration limitation. It doesn't allow to specify port-based routing (only subdomain routing is available). For more details please refer to the [Github issue #59](https://github.com/jwilder/nginx-proxy/issues/59)\n\n## Detailed description\n\nHere is some more information about setup presented above. Some of them may be evident especially for (more or less) experienced Docker users. I think that they are worth at least skimming through.\n\n### container_name\n\nThe container name option, once specified, let's you refer to the deployed container using a custom name instead of SHA code. It is useful especially for checking container status with `docker logs [container_name]` or executing custom commands with `docker exec -it [container_name]`.\n\n### restart: always\n\nJust to ensure continuous work even after Docker/host restart. Be careful with **restart: unless-stopped** as this option lacks the container autostart feature.\n\n### labels\n\nThey are used (in this setup) just to mark which container is the Nginx proxy in order to trigger its reloading on certificate update. It's a handy feature implemented by **letsencrypt-nginx-proxy-companion**.\n\n### /var/run/docker.sock:/var/run/docker.sock:ro\n\nThat's a tricky one. The **docker.sock** allows the container to work with [Docker Engine API](https://docs.docker.com/engine/api/v1.36/). It is used by the **jwilder/nginx-proxy** to do its **VIRTUAL_...** env variables magic. The docker API works similar to any JSON based HTTP API, but it is exposed on **docker.sock** socket.\n\n### :ro and :rw suffixes\n\nI think it's an obvious one but to cover \"everything\" I can say that those are folder/file permissions: \"**R**ead **O**nly\" and \"**R**ead and **W**rite\".\n\n### volumes\n\nThere are 3 kinds of \"paths\" used in this setup:\n\n- absolute paths like **/var/run/docker.sock:...** which points to the host system internal files\n- relative paths e.g. ***./letsencrypt/certs:...** which are a handy way of storing/sharing container files with the host system\n- volumes dirs **influx-data:...** these are used for ensuring data persistence ensured by the Docker\n\n### cert files\n\nDon't worry that the cert file paths are invalid on the first run when there are no certificate files. As soon as Let's Encrypt certificate request will be fulfilled you will find appropriate certificates in the specified localizations.\n\n### REUSE_PRIVATE_KEYS\n\nThis option passed to the letsencrypt container via environment variables allows you to reuse same keys after 90 days expiry time. That's the only way to avoid manual restart of the **influx** container after certificates renewal (because of certificate file changes).\n\n## Footnotes\n\nThat's all for now. I'd be happy to answer some questions. I hope to be able to explain everything about this or similar setup.\nFor testing SSL configuration you may use https://www.ssllabs.com/ssltest (thanks to @Kjetil MjÃ¸s who remid me about this tool in one of his comments). The expected overall grade is **A+**.\n\n## Question: How to add another Grafana instance on separate (sub)domain?\n\nIt should be fairly easy, just point your new (sub)domain at your existing Docker host and add following \"section\" to the **docker-compose.yml** file:\n\n```yaml\n#... existing docker-compose.yml content omitted for brevity\n  grafana2: # just for clarification: this is a service name\n    image: grafana/grafana:5.0.0 # or probably any other version\n    container_name: grafana2\n    restart: always\n    environment:\n      - VIRTUAL_HOST=ANOTHER.DOMAIN.TEST # adjust to match your domain name\n      - VIRTUAL_PROTO=https\n      - VIRTUAL_PORT=3000\n      - LETSENCRYPT_HOST=ANOTHER.DOMAIN.TEST # adjust to match your domain name\n      - LETSENCRYPT_EMAIL=YOUR.EMAIL@ADDRESS.TEST # adjust to match your email\n\n      - GF_SERVER_CERT_FILE=/etc/letsencrypt/certs/ANOTHER.DOMAIN.TEST.crt # adjust to match your domain name\n      - GF_SERVER_CERT_KEY=/etc/letsencrypt/certs/ANOTHER.DOMAIN.TEST.key # adjust to match your domain name\n      - GF_SERVER_PROTOCOL=https\n\n      - GF_SERVER_DOMAIN=ANOTHER.DOMAIN.TEST # adjust to match your domain name\n      - GF_SECURITY_ADMIN_USER=SECURE_USERNAME # adjust to create Grafana admin account\n      - GF_SECURITY_ADMIN_PASSWORD=SECURE_PASS # adjust to set Grafana admin password\n    volumes:\n      - ./letsencrypt/certs:/etc/letsencrypt/certs:ro\n\n      - grafana2-data:/var/lib/grafana\n```\nNotable changes compared to direct \"copy/paste\" of existing **grafana** service:\n- please remember to change service name and **container_name** to make them different from existing ones (**grafana2** in this example)\n- every **YOUR.DOMAIN.TEST** is replaced with **ANOTHER.DOMAIN.TEST** (it might be **any** domain name which is pointed at your host, not necessarly a subdomain with common root domain e.g. **MYDOMAIN.TEST** will work as well)\n- as you may noticed **LETSENCRYPT_EMAIL** doesn't require any changes as you may use one email for multiple domains\n- in **volumes** section please remember to change **grafana-data** to any other volume (**grafana2-data** in my example), in other case your Grafana instances will share files (you probably don't want that)\n\nYou should also add volume mapping for a new Grafana instance at the end of **docker-compose.yml** (which was modified before) in **volumes** section append:\n```yaml\n#... existing docker-compose.yml content omitted for brevity\nvolumes:\n  #... existing volumes omitted for brevity\n  grafana2-data:\n    driver: local\n```\n\nThat's it.\nNow execute:\n```bash\ndocker-compose up -d\ndocker-compose restart\n```\nDocker should now run two independent Grafana instances on different (sub)domains.\n","copyrightHolder":{"@type":"Person"},"copyrightYear":"2018-02-05T22:37:16.000Z","creator":{"@type":"Person"},"inLanguage":"en"}</script><style data-href="/styles.6c00cd31c078af9de5dd.css">code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:inherit}.gatsby-highlight-code-line:empty:after{content:" "}code[class*=language-],pre[class*=language-]{color:#5c6e74}pre[class*=language-]{background:#fff;border:1px solid #d1d5da;border-radius:3px}:not(pre)>code[class*=language-]{color:inherit;background:#f1f1f1;padding:2px 4px;margin:0 2px;font-size:.8rem;text-shadow:none}pre[class*=language-]{padding:0 6px}.line-numbers .line-numbers-rows{padding:6px 0 0 8px;border:1px solid transparent;line-height:1.5;background:#fcfcfc}@media (min-width:600px){.line-numbers .line-numbers-rows{padding:6px 0 0 12px}}pre[class*=language-].line-numbers{padding-left:32px;padding-right:18px}@media (min-width:600px){pre[class*=language-].line-numbers{padding-left:48px}}.line-numbers-rows>span:before{color:rgba(27,31,35,.3)}.gatsby-highlight-code-line{display:block;background-color:#fffbdd;margin-right:-10px;padding-right:10px;margin-left:-4px;padding-left:4px}[data-language]{padding:0;margin:0 0 1.666rem}code[class*=language-],pre[class*=language-]{display:inline-block;vertical-align:middle;overflow:scroll;max-width:100%;font-size:.6rem;-webkit-font-smoothing:antialiased}.gatsby-highlight pre[class*=language-]{display:block}.gatsby-highlight code[class*=language-]{display:block;padding:6px 0 20px}@media (min-width:600px){.gatsby-highlight code[class*=language-]{padding:6px 0}}*{box-sizing:border-box}body{color:#111;-webkit-font-smoothing:antialiased;min-width:360px}a{color:inherit;text-decoration:none}html{font-size:100%}@media (min-width:600px){html{font-size:112.5%}}@media (min-width:900px){html{font-size:120%}}@media (min-width:1040px){html{font-size:120%}}html[amp] .gatsby-resp-image-wrapper{left:-8px}#disqus_thread{width:95%;margin:auto}</style><style data-styled="ivNXPs bLwFiT ezKblj VaewE cokSQa eQLGZU bFwYzN ljKOOf dIoKsH JFLdO gBgPZa iWCoqC loRRQz juBybS Xracc hIduYZ bZdjSS jiWzbw kRABZN hHhrxG gUaCNj dXLJRX gfHRHM ffSYBQ eohSMh rWBCC kBliJm ZQchY gYslaw kyaInQ crXwW hNjtzh bSJODi LUBlX hGPWto gEbTXz hMYwmg iNDMyc dnkZyx fRjnCq iClmz jSNjRb chUfWh cldIKF buKDqR ftbNbI jGHblD cMLhOG tYTWj bEhqbx iXqmXg jYyKqg cYibTA iaYraz kASfVB lbCqxU berEvg gZqHrI cVDVpq KWfpA kfJjUJ hNGpJr klwlbE" data-styled-version="4.3.1">
/* sc-component-id: styles__Wrapper-n5upcq-0 */
.ZQchY{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin:24px 0 16px;} @media (min-width:600px){.ZQchY{margin:48px 0 24px;}}
/* sc-component-id: styles__Container-n5upcq-1 */
.gYslaw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:-apple-system,"BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;color:#000;}
/* sc-component-id: styles__Photo-n5upcq-2 */
.kyaInQ{border-radius:50%;width:60px;height:60px;overflow:hidden;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}
/* sc-component-id: styles__Info-n5upcq-3 */
.crXwW{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;margin-left:12px;} @media (min-width:600px){.crXwW{margin-left:16px;}}
/* sc-component-id: styles__Name-n5upcq-4 */
.hNjtzh{font-weight:600;font-size:1.25rem;line-height:1.2;}
/* sc-component-id: styles__About-n5upcq-5 */
.bSJODi{padding:0;color:#666;margin-top:4px;font-size:0.8125rem;line-height:1.2;}
/* sc-component-id: styles__More-n5upcq-6 */
.LUBlX{color:#999;border-radius:20px;border:1px solid #999;padding:8px 16px;font-size:0.75rem;font-family:-apple-system,"BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;line-height:1.2;display:none;} @media (min-width:600px){.LUBlX{display:block;}} .LUBlX:hover{color:#3eb0ef;border-color:#3eb0ef;}
/* sc-component-id: styles__Wrapper-sc-1spuanr-0 */
.ljKOOf{text-transform:uppercase;font-family:-apple-system,"BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;font-size:0.75rem;color:#fff;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;height:50px;overflow:hidden;} .ljKOOf:hover{color:#ccc;}
/* sc-component-id: styles__Scroller-sc-1spuanr-1 */
.dIoKsH{box-sizing:content-box;height:100%;padding-bottom:40px;overflow:scroll;overflow-y:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}
/* sc-component-id: styles__Container-sc-1spuanr-2 */
.JFLdO{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%;}
/* sc-component-id: styles__List-sc-1spuanr-3 */
.gBgPZa{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0;pading:0;list-style:none;white-space:nowrap;}
/* sc-component-id: styles__Item-sc-1spuanr-4 */
.iWCoqC{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0;} .iWCoqC:last-child{padding-right:12px;} .iWCoqC:hover{color:#fff;}
/* sc-component-id: styles__Link-sc-1spuanr-5 */
.loRRQz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:12px;}
/* sc-component-id: styles__ExternalLink-sc-1spuanr-6 */
.juBybS{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:12px;}
/* sc-component-id: styles__Placeholder-sc-1x4v1ga-0 */
.bLwFiT{height:50px;}
/* sc-component-id: styles__Wrapper-sc-1x4v1ga-1 */
.ezKblj{position:absolute;top:0;z-index:1000;width:100%;background:#000;color:#fff;}
/* sc-component-id: styles__Container-sc-1x4v1ga-2 */
.VaewE{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;height:50px;margin:0 auto;max-width:1080px;}
/* sc-component-id: styles__Name-sc-1x4v1ga-3 */
.cokSQa{height:100%;padding:0 24px;max-width:50vw;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:-apple-system,"BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;font-size:0.875rem;font-weight:600;}
/* sc-component-id: styles__InnerName-sc-1x4v1ga-4 */
.eQLGZU{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}
/* sc-component-id: styles__MainMenu-sc-1x4v1ga-5 */
.bFwYzN{max-width:50vw;}
/* sc-component-id: styles__Wrapper-sc-1diyvya-0 */
.kfJjUJ{font-family:-apple-system,"BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;font-size:0.75rem;background:#000;color:#ccc;}
/* sc-component-id: styles__Container-sc-1diyvya-1 */
.hNGpJr{padding:18px 24px 36px;margin:0 auto;max-width:1080px;}
/* sc-component-id: styles__Name-sc-1diyvya-2 */
.klwlbE{padding:12px;margin:-12px 0 -12px -12px;}
/* sc-component-id: PageLayout__Wrapper-ttzf8e-0 */
.ivNXPs{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}
/* sc-component-id: PageLayout__Main-ttzf8e-1 */
.Xracc{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}
/* sc-component-id: Tile__Wrapper-k83soo-0 */
.iClmz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 0 100%;-ms-flex:1 0 100%;flex:1 0 100%;width:100%;border-radius:5px;overflow:hidden;box-shadow:8px 14px 38px rgba(39,44,49,0.06),1px 3px 8px rgba(39,44,49,0.03);-webkit-transition:-webkit-transform 0.1s ease-in;-webkit-transition:transform 0.1s ease-in;transition:transform 0.1s ease-in;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);} .iClmz:hover{-webkit-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01);}
/* sc-component-id: styles__Article-zl0bsg-0 */
.bEhqbx{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 0 100%;-ms-flex:1 0 100%;flex:1 0 100%;width:100%;}
/* sc-component-id: styles__Link-zl0bsg-1 */
.iXqmXg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 0 100%;-ms-flex:1 0 100%;flex:1 0 100%;width:100%;border:none;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;} @media (min-width:600px){.iXqmXg{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}
/* sc-component-id: styles__Thumbnail-zl0bsg-2 */
.jYyKqg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:0 0 250px;-ms-flex:0 0 250px;flex:0 0 250px;} @media (min-width:600px){.jYyKqg{-webkit-flex:0 0 250px;-ms-flex:0 0 250px;flex:0 0 250px;}}
/* sc-component-id: styles__Content-zl0bsg-4 */
.cYibTA{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;z-index:1;background:#fff;padding:20px;} @media (min-width:600px){.cYibTA{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}}
/* sc-component-id: styles__Tag-zl0bsg-5 */
.iaYraz{display:block;font-size:0.75rem;margin-bottom:6px;color:#666;text-transform:uppercase;}
/* sc-component-id: styles__Title-zl0bsg-6 */
.kASfVB{display:block;font-size:1.25rem;line-height:1.2;margin-bottom:0.6em;}
/* sc-component-id: styles__Excerpt-zl0bsg-7 */
.lbCqxU{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;display:block;font-size:0.7619rem;line-height:1.4;margin:0 0 18px;font-size:0.875rem;}
/* sc-component-id: styles__Footer-zl0bsg-8 */
.berEvg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;font-family:-apple-system,"BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;font-size:0.75rem;font-weight:500;text-transform:uppercase;color:#666;}
/* sc-component-id: styles__Author-zl0bsg-9 */
.gZqHrI{height:30px;width:30px;border-radius:50%;overflow:hidden;border:1px solid #eee;}
/* sc-component-id: styles__Avatar-zl0bsg-10 */
.cVDVpq{width:100%;height:100%;}
/* sc-component-id: styles__TimeToRead-zl0bsg-11 */
.KWfpA{font-family:-apple-system,"BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;font-size:0.75rem;font-weight:500;text-transform:uppercase;color:#666;}
/* sc-component-id: styles__Content-sc-1cwohrs-0 */
.jSNjRb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 0 100%;-ms-flex:1 0 100%;flex:1 0 100%;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:36px 24px 24px;text-align:center;background:#000;color:#fff;font-family:-apple-system,"BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;}
/* sc-component-id: styles__TopLine-sc-1cwohrs-1 */
.chUfWh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}
/* sc-component-id: styles__SiteName-sc-1cwohrs-2 */
.cldIKF{margin:0 auto;font-weight:300;font-size:0.75rem;}
/* sc-component-id: styles__LinkTop-sc-1cwohrs-3 */
.buKDqR{display:block;margin:0 auto;padding:10px 12px;font-weight:300;}
/* sc-component-id: styles__Title-sc-1cwohrs-4 */
.ftbNbI{font-weight:300;font-size:1.375rem;}
/* sc-component-id: styles__List-sc-1cwohrs-5 */
.jGHblD{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:0;margin:24px auto 0;list-style:none;}
/* sc-component-id: styles__Item-sc-1cwohrs-6 */
.cMLhOG{margin:0;} .cMLhOG:last-child a{border-bottom:none;}
/* sc-component-id: styles__Link-sc-1cwohrs-7 */
.tYTWj{display:block;padding:20px 0;border-bottom:1px solid rgba(255,255,255,0.5);font-size:0.875rem;line-height:1.2;} .tYTWj:hover{-webkit-text-decoration:underline;text-decoration:underline;}
/* sc-component-id: styles__Wrapper-sc-177ejwt-0 */
.hMYwmg{background:#f4f8fb;}
/* sc-component-id: styles__Container-sc-177ejwt-1 */
.iNDMyc{display:block;margin:0 auto;max-width:1080px;}
/* sc-component-id: styles__List-sc-177ejwt-2 */
.dnkZyx{margin:0;padding:12px 0;list-style:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;} @media (min-width:600px){.dnkZyx{padding:12px;}}
/* sc-component-id: styles__Item-sc-177ejwt-3 */
.fRjnCq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 1 300px;-ms-flex:1 1 300px;flex:1 1 300px;max-width:600px;margin:12px 8px;} @media (min-width:600px){.fRjnCq{margin:12px;}}
/* sc-component-id: styles__Wrapper-sc-18g9haf-0 */
.hIduYZ{width:100%;}
/* sc-component-id: styles__Header-sc-18g9haf-1 */
.bZdjSS{font-size:1rem;background:#fff;text-align:center;z-index:100;width:100%;} @media (min-width:600px){.bZdjSS{position:absolute;top:50px;left:0;}}
/* sc-component-id: styles__HeaderContent-sc-18g9haf-2 */
.jiWzbw{margin:0 auto;max-width:1080px;padding:1em 8px 1em;}
/* sc-component-id: styles__DateCreated-sc-18g9haf-3 */
.kRABZN{color:#666;font-size:0.75rem;font-weight:600;font-family:-apple-system,"BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;text-transform:uppercase;}
/* sc-component-id: styles__Title-sc-18g9haf-4 */
.hHhrxG{text-align:center;margin:12px 0;font-weight:600;font-size:1.625rem;} @media (min-width:600px){.hHhrxG{font-size:2rem;}}
/* sc-component-id: styles__Subtitle-sc-18g9haf-5 */
.gUaCNj{color:#3eb0ef;font-size:0.875rem;font-weight:600;font-family:-apple-system,"BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;text-transform:uppercase;}
/* sc-component-id: styles__Divider-sc-18g9haf-6 */
.dXLJRX{color:#333;margin:0 6px;}
/* sc-component-id: styles__TopImage-sc-18g9haf-11 */
.gfHRHM{width:100%;overflow:hidden;z-index:-1;background:#090a0b;} @media (min-width:600px){.gfHRHM{position:fixed;top:600px;left:0;margin-top:-600px;height:600px;}}
/* sc-component-id: styles__HeaderImage-sc-18g9haf-12 */
.ffSYBQ{min-width:100%;min-height:100%;max-width:none;} @media (min-width:600px){.ffSYBQ{position:relative;left:50%;top:50%;z-index:-1;-webkit-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);}}
/* sc-component-id: styles__Main-sc-18g9haf-13 */
.eohSMh{position:relative;z-index:100;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;background:#fff;} @media (min-width:600px){.eohSMh{margin-top:600px;}}
/* sc-component-id: styles__Container-sc-18g9haf-14 */
.rWBCC{position:relative;width:100%;max-width:1080px;margin:0px auto;background:#fff;padding:36px 8px 12px;} @media (min-width:600px){.rWBCC{margin:-150px auto 0;padding:36px 24px 12px;}} @media (min-width:900px){.rWBCC{padding:36px 48px 12px;}} @media (min-width:1040px){.rWBCC::before,.rWBCC::after{content:"";position:absolute;top:15px;z-index:-1;display:block;width:20px;height:200px;background:rgba(39,44,49,0.15);-webkit-filter:blur(5px);filter:blur(5px);}.rWBCC::before{left:-2px;-webkit-transform:rotate(-2deg);-ms-transform:rotate(-2deg);transform:rotate(-2deg);}.rWBCC::after{right:-2px;-webkit-transform:rotate(2deg);-ms-transform:rotate(2deg);transform:rotate(2deg);}}
/* sc-component-id: styles__Content-sc-18g9haf-15 */
.kBliJm a{border-bottom:1px solid #111;} .kBliJm a.gatsby-resp-image-link,.kBliJm .gatsby-resp-image-figure a{border-bottom:none;}
/* sc-component-id: styles__Comments-sc-18g9haf-16 */
.hGPWto{background:#fff;}
/* sc-component-id: styles__CommentsContainer-sc-18g9haf-17 */
.gEbTXz{max-width:1080px;margin:0 auto;padding:36px 8px 12px;} @media (min-width:600px){.gEbTXz{padding:36px 24px 12px;}} @media (min-width:900px){.gEbTXz{padding:36px 48px 12px;}}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="shortcut icon" href="/icons-13b29af4c563a1cfccb4e580e749b474/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/icons-13b29af4c563a1cfccb4e580e749b474/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/icons-13b29af4c563a1cfccb4e580e749b474/favicon-32x32.png"/><link rel="manifest" href="/icons-13b29af4c563a1cfccb4e580e749b474/manifest.json"/><meta name="mobile-web-app-capable" content="yes"/><meta name="theme-color" content="#fff"/><meta name="application-name" content="blog"/><link rel="apple-touch-icon" sizes="57x57" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-icon-144x144.png"/><meta name="generator" content="Gatsby 2.8.6"/><link rel="apple-touch-icon" sizes="167x167" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-icon-167x167.png"/><link rel="apple-touch-icon" sizes="180x180" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-icon-180x180.png"/><link rel="apple-touch-icon" sizes="1024x1024" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-icon-1024x1024.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/><meta name="apple-mobile-web-app-title" content="blog"/><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 1)" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-startup-image-320x460.png"/><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-startup-image-640x920.png"/><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-startup-image-640x1096.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-startup-image-750x1294.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 3)" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-startup-image-1182x2208.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 3)" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-startup-image-1242x2148.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 1)" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-startup-image-748x1024.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 1)" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-startup-image-768x1004.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-startup-image-1496x2048.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)" href="/icons-13b29af4c563a1cfccb4e580e749b474/apple-touch-startup-image-1536x2008.png"/><link as="script" rel="preload" href="/styles-f8d8fa4325bb16937a78.js"/><link as="script" rel="preload" href="/component---gatsby-ghost-theme-src-templates-post-js-6a64e563e2f45fd55928.js"/><link as="script" rel="preload" href="/1-504fdce3920a82105d6a.js"/><link as="script" rel="preload" href="/0-c2e34c465eb48179819f.js"/><link as="script" rel="preload" href="/app-aa46b3f538b5a7597bfa.js"/><link as="script" rel="preload" href="/webpack-runtime-330d110dff7a736dbf08.js"/><link as="fetch" rel="preload" href="/static/d/314/path---grafana-with-lets-encrypt-ssl-on-docker-724-f07-gaPOXDRVpe5pnBSBtSxaHYHKO2Y.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="PageLayout__Wrapper-ttzf8e-0 ivNXPs"><div class="styles__Placeholder-sc-1x4v1ga-0 bLwFiT"></div><header class="styles__Wrapper-sc-1x4v1ga-1 ezKblj"><div class="styles__Container-sc-1x4v1ga-2 VaewE"><a class="styles__Name-sc-1x4v1ga-3 cokSQa" href="/"><div class="styles__InnerName-sc-1x4v1ga-4 eQLGZU">Full-stack developer blog by Jan Grzegorowski</div></a><nav class="styles__MainMenu-sc-1x4v1ga-5 bFwYzN styles__Wrapper-sc-1spuanr-0 ljKOOf"><div class="styles__Scroller-sc-1spuanr-1 dIoKsH"><div class="styles__Container-sc-1spuanr-2 JFLdO"><ul class="styles__List-sc-1spuanr-3 gBgPZa"><li class="styles__Item-sc-1spuanr-4 iWCoqC"><a class="styles__Link-sc-1spuanr-5 loRRQz" href="/">Home</a></li><li class="styles__Item-sc-1spuanr-4 iWCoqC"><a class="styles__Link-sc-1spuanr-5 loRRQz" href="/author/jan">Contact</a></li><li class="styles__Item-sc-1spuanr-4 iWCoqC"><a class="styles__Link-sc-1spuanr-5 loRRQz" href="/cookies">Cookies</a></li></ul><ul class="styles__List-sc-1spuanr-3 gBgPZa"><li class="styles__Item-sc-1spuanr-4 iWCoqC"><a href="https://www.linkedin.com/in/jan-grzegorowski/" target="_blank" rel="noopener" class="styles__ExternalLink-sc-1spuanr-6 juBybS"></a></li><li class="styles__Item-sc-1spuanr-4 iWCoqC"><a href="https://twitter.com/jangrzegorowski/" target="_blank" rel="noopener" class="styles__ExternalLink-sc-1spuanr-6 juBybS"></a></li></ul></div></div></nav></div></header><main class="PageLayout__Main-ttzf8e-1 Xracc"><article class="styles__Wrapper-sc-18g9haf-0 hIduYZ"><header class="styles__Header-sc-18g9haf-1 bZdjSS"><div class="styles__HeaderContent-sc-18g9haf-2 jiWzbw"><time dateTime="2018-02-05T22:37:16.000Z" class="styles__DateCreated-sc-18g9haf-3 kRABZN">05 February 2018</time><h1 class="styles__Title-sc-18g9haf-4 hHhrxG">Grafana and InfluxDB with Let&#x27;s Encrypt SSL on Docker</h1><div class="styles__Subtitle-sc-18g9haf-5 gUaCNj"><a href="/tag/backend">Backend</a><span class="styles__Divider-sc-18g9haf-6 dXLJRX">/</span><a href="/tag/docker">Docker</a></div></div></header><div class="styles__TopImage-sc-18g9haf-11 gfHRHM"><div class="styles__HeaderImage-sc-18g9haf-12 ffSYBQ gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:46.30434782608695%"></div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABRUlEQVQoz6WRS1LDMBBEfQkSWMSyZ/S3/AkJJkBx/2M1I8lOCrYsXo0002q55UZ1jFNLUJ1GJ/R9pevrPveJLYgMWsVlZtjAG1vWSnpMGl4bUEdoxuDxOniM3hVhPpjNrLYI1mIKDtfkcRHNOXqsY8DnHPG1RNymKLO6/z4PSM5kw4BFhLMYT2I6OCdGTi6Q3tbPl+VZ1k1lvxHqPuW5VEOMhrVDjr1D8vk5glJU4mSsjTA2SGQqmv0pHnBJdTp1aHLE/d36IiZZG7BL0AKxgxYz5vpmRLboCv0DklmrejHkKsjGbAewibDpCje/w03CfIOVatIFdnyT9QoTz/UyHbYfVsmpGhMXMbjI4RV++ShUs/UXXoxLX9h1d/1Ue2STGPpU4pF8GZlQKpf1o+Y+/6k7976ka+U9m8PxBU+H48bzP6jnfwBqdwGmpFoLZgAAAABJRU5ErkJggg==" title="Grafana and InfluxDB with Let&#x27;s Encrypt SSL on Docker" alt="Grafana and InfluxDB with Let&#x27;s Encrypt SSL on Docker" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><img loading="lazy" sizes="(max-width: 1840px) 100vw, 1840px" srcset="/static/0bb15c5c60bd1f1b45cf89f238d3ca40/9d65d/grafanadashboard-1.png 480w,
/static/0bb15c5c60bd1f1b45cf89f238d3ca40/bc549/grafanadashboard-1.png 960w,
/static/0bb15c5c60bd1f1b45cf89f238d3ca40/24143/grafanadashboard-1.png 1840w" src="/static/0bb15c5c60bd1f1b45cf89f238d3ca40/24143/grafanadashboard-1.png" alt="Grafana and InfluxDB with Let's Encrypt SSL on Docker" title="Grafana and InfluxDB with Let's Encrypt SSL on Docker" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><div class="styles__Main-sc-18g9haf-13 eohSMh"><div class="styles__Container-sc-18g9haf-14 rWBCC"><div class="styles__Content-sc-18g9haf-15 kBliJm"><p>It seems extremely easy to do if you know all required Docker containers, but it's not so obvious if you are not a fluent Docker user.</p>
<h2>Update!</h2>
<p>Despite the fact that LE will automatically regenerate certificate files there is no way (which I'm aware of) to trigger Influx container restart in order to use regenerated certificate files. The only workaround is setting <code class="language-text">REUSE_PRIVATE_KEYS=true</code> environment variable for <strong>letsencrypt</strong> container. See updated post for more details.</p>
<p>Here is what it takes to create SSL secured <strong>Grafana + InfluxDB</strong> Docker setup:</p>
<ul>
<li>Grafana (<a href="https://hub.docker.com/r/grafana/grafana/">https://hub.docker.com/r/grafana/grafana/</a>)</li>
<li>InfluxDB (<a href="https://hub.docker.com/_/influxdb/">https://hub.docker.com/_/influxdb/</a>)</li>
<li>Nginx-proxy (<a href="https://hub.docker.com/r/jwilder/nginx-proxy/">https://hub.docker.com/r/jwilder/nginx-proxy/</a>)</li>
<li>Let's Encrypt Nginx-proxy companion (<a href="https://hub.docker.com/r/jrcs/letsencrypt-nginx-proxy-companion/">https://hub.docker.com/r/jrcs/letsencrypt-nginx-proxy-companion/</a>)</li>
</ul>
<p>The additional benefit of this setup is certificate autogeneration and auto-renewal (no more worries/downtime related to expired Let's Encrypt certificate.</p>
<p>Required tools:</p>
<ul>
<li>docker (<a href="https://www.docker.com/">https://www.docker.com/</a>)</li>
<li>docker-compose (<a href="https://docs.docker.com/compose/install/">https://docs.docker.com/compose/install/</a> eases multi-container setup and removal operations)</li>
</ul>
<h2>Spoiler</h2>
<p>Create <strong>docker-compose.yml</strong> file with the content similar to the example below and execute <strong>docker-compose up -d</strong> command in the directory where your <strong>yml</strong> file is saved.
Here is the example content of <strong>docker-compose.yml</strong> with some comments related to the required modifications/adjustments (don't worry about the file length, feel free to skip this section and continue reading starting from Architecture description):</p>
<div class="gatsby-highlight" data-language="yaml"><pre style="counter-reset: linenumber NaN" class="language-yaml line-numbers"><code class="language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'2'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">grafana</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> grafana/grafana<span class="token punctuation">:</span>5.0.0 <span class="token comment"># or probably any other version</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> grafana
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> VIRTUAL_HOST=YOUR.DOMAIN.TEST <span class="token comment"># adjust to match your domain name</span>
      <span class="token punctuation">-</span> VIRTUAL_PROTO=https
      <span class="token punctuation">-</span> VIRTUAL_PORT=3000
      <span class="token punctuation">-</span> LETSENCRYPT_HOST=YOUR.DOMAIN.TEST <span class="token comment"># adjust to match your domain name</span>
      <span class="token punctuation">-</span> LETSENCRYPT_EMAIL=YOUR.EMAIL@ADDRESS.TEST <span class="token comment"># adjust to match your email</span>

      <span class="token punctuation">-</span> GF_SERVER_CERT_FILE=/etc/letsencrypt/certs/YOUR.DOMAIN.TEST.crt <span class="token comment"># adjust to match your domain name</span>
      <span class="token punctuation">-</span> GF_SERVER_CERT_KEY=/etc/letsencrypt/certs/YOUR.DOMAIN.TEST.key <span class="token comment"># adjust to match your domain name</span>
      <span class="token punctuation">-</span> GF_SERVER_PROTOCOL=https

      <span class="token punctuation">-</span> GF_SERVER_DOMAIN=YOUR.DOMAIN.TEST <span class="token comment"># adjust to match your domain name</span>
      <span class="token punctuation">-</span> GF_SECURITY_ADMIN_USER=SECURE_USERNAME <span class="token comment"># adjust to create Grafana admin account</span>
      <span class="token punctuation">-</span> GF_SECURITY_ADMIN_PASSWORD=SECURE_PASS <span class="token comment"># adjust to set Grafana admin password</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./letsencrypt/certs<span class="token punctuation">:</span>/etc/letsencrypt/certs<span class="token punctuation">:</span>ro

      <span class="token punctuation">-</span> grafana<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/var/lib/grafana

  <span class="token key atrule">influx</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> influxdb<span class="token punctuation">:</span>1.4.2 <span class="token comment"># or any other recent version</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> influx
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> influx<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/var/lib/influxdb

      <span class="token punctuation">-</span> ./letsencrypt/certs<span class="token punctuation">:</span>/etc/letsencrypt/certs<span class="token punctuation">:</span>ro
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"8086:8086"</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token comment"># might be used someday when issue #59 will be resolved/merged</span>
      <span class="token comment">#- VIRTUAL_HOST=YOUR.DOMAIN.TEST:8086</span>
      <span class="token comment">#- VIRTUAL_PROTO=https</span>
      <span class="token comment">#- VIRTUAL_PORT=8086</span>

      <span class="token punctuation">-</span> INFLUXDB_HTTP_HTTPS_ENABLED=true
      <span class="token punctuation">-</span> INFLUXDB_HTTP_HTTPS_CERTIFICATE=/etc/letsencrypt/certs/YOUR.DOMAIN.TEST.crt <span class="token comment"># adjust to match your domain name</span>
      <span class="token punctuation">-</span> INFLUXDB_HTTP_HTTPS_PRIVATE_KEY=/etc/letsencrypt/certs/YOUR.DOMAIN.TEST.key <span class="token comment"># adjust to match your domain name</span>

      <span class="token punctuation">-</span> INFLUXDB_DB=SOME_DB_NAME <span class="token comment"># set any other to create database on initialization</span>
      <span class="token punctuation">-</span> INFLUXDB_HTTP_ENABLED=true
      <span class="token punctuation">-</span> INFLUXDB_HTTP_AUTH_ENABLED=true

      <span class="token punctuation">-</span> INFLUXDB_ADMIN_USER=SECURE_USERNAME <span class="token comment"># adjust to create InfluxDB admin account</span>
      <span class="token punctuation">-</span> INFLUXDB_ADMIN_PASSWORD=SECURE_PASS <span class="token comment"># adjust to create InfluxDB admin password</span>

  <span class="token comment"># Containers below ensures automatic cert creation and renewal</span>
  <span class="token key atrule">nginx</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> jwilder/nginx<span class="token punctuation">-</span>proxy<span class="token punctuation">:</span>0.6.0
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">labels</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> com.github.jrcs.letsencrypt_nginx_proxy_companion.nginx_proxy
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"80:80"</span>
      <span class="token punctuation">-</span> <span class="token string">"443:443"</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /var/run/docker.sock<span class="token punctuation">:</span>/tmp/docker.sock<span class="token punctuation">:</span>ro
      <span class="token punctuation">-</span> ./nginx/html<span class="token punctuation">:</span>/usr/share/nginx/html
      <span class="token punctuation">-</span> ./nginx/vhost.d<span class="token punctuation">:</span>/etc/nginx/vhost.d
      <span class="token punctuation">-</span> ./letsencrypt/certs<span class="token punctuation">:</span>/etc/nginx/certs<span class="token punctuation">:</span>ro
  <span class="token key atrule">letsencrypt</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> jrcs/letsencrypt<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>proxy<span class="token punctuation">-</span>companion<span class="token punctuation">:</span>v1.7
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> letsencrypt
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">volumes_from</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> nginx
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./letsencrypt/certs<span class="token punctuation">:</span>/etc/nginx/certs<span class="token punctuation">:</span>rw
      <span class="token punctuation">-</span> /var/run/docker.sock<span class="token punctuation">:</span>/var/run/docker.sock<span class="token punctuation">:</span>ro
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> REUSE_PRIVATE_KEYS=true

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">influx-data</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local
  <span class="token key atrule">grafana-data</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>That's all. Just replace:</p>
<ul>
<li><strong>YOUR.DOMAIN.TEST</strong>  - appropriate domain name</li>
<li><strong>YOUR.EMAIL@ADDRESS.TEST</strong> - your email address</li>
<li><strong>SECURE_USERNAME</strong> - some username</li>
<li><strong>SECURE_PASS</strong> - secure password for the user</li>
</ul>
<p>After executing <strong>docker-compose up -d</strong> you SSLed <strong>Grafana + Influx</strong> stack should be available over <strong><a href="https://YOUR.DOMAIN.TEST">https://YOUR.DOMAIN.TEST</a></strong> and <strong><a href="https://YOUR.DOMAIN.TEST:8086">https://YOUR.DOMAIN.TEST:8086</a></strong>. It may take a couple of minutes on the first run because of Let's Encrypt certificate generation.</p>
<p>As an "extra" benefit the Nginx ensures <a href="https://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security">HSTS headers</a> for SSLed service, which basically means that all requests have to be done using an encrypted connection (the browser will force <code class="language-text">https://</code> at the beginning of the address).</p>
<h2>Architecture</h2>
<p>As we know by default Docker creates it's own subnetwork for running containers and communication between them. Here is how it looks in the above example.</p>
<p><img src="/influx-grafna-ssl-2-d3743181cb54fc46ca696349736269b3.svg" alt="Influx-Grafana-Let&#x27;s Encrypt SSL"></p>
<p><strong>NOTE 1: Influx URL</strong>.
Inside Grafana data sources panel you will have to define your Influx URL using a fully qualified domain name (<a href="https://en.wikipedia.org/wiki/Fully_qualified_domain_name">FQDN</a> e.g. <a href="https://YOUR.DOMAIN.TEST:8086">https://YOUR.DOMAIN.TEST:8086</a>) and not internal Docker subnetwork alias e.g. influx. This is due to the fact that SSL certificate will work with Influx only if it is accessed through the URL for which certificate was requested.</p>
<p><strong>NOTE 2: Grafana port</strong>. In this setup Grafana still uses its default 3000 port, the redirection from 80 and 443 ports is handled by the Nginx proxy server.</p>
<p><strong>NOTE 3: Influx without proxy</strong>. As you may notice InfluxDB connections doesn't go through Nginx. That fact is caused by the Nginx env variables configuration limitation. It doesn't allow to specify port-based routing (only subdomain routing is available). For more details please refer to the <a href="https://github.com/jwilder/nginx-proxy/issues/59">Github issue #59</a></p>
<h2>Detailed description</h2>
<p>Here is some more information about setup presented above. Some of them may be evident especially for (more or less) experienced Docker users. I think that they are worth at least skimming through.</p>
<h3>container_name</h3>
<p>The container name option, once specified, let's you refer to the deployed container using a custom name instead of SHA code. It is useful especially for checking container status with <code class="language-text">docker logs [container_name]</code> or executing custom commands with <code class="language-text">docker exec -it [container_name]</code>.</p>
<h3>restart: always</h3>
<p>Just to ensure continuous work even after Docker/host restart. Be careful with <strong>restart: unless-stopped</strong> as this option lacks the container autostart feature.</p>
<h3>labels</h3>
<p>They are used (in this setup) just to mark which container is the Nginx proxy in order to trigger its reloading on certificate update. It's a handy feature implemented by <strong>letsencrypt-nginx-proxy-companion</strong>.</p>
<h3>/var/run/docker.sock:/var/run/docker.sock:ro</h3>
<p>That's a tricky one. The <strong>docker.sock</strong> allows the container to work with <a href="https://docs.docker.com/engine/api/v1.36/">Docker Engine API</a>. It is used by the <strong>jwilder/nginx-proxy</strong> to do its <strong>VIRTUAL_...</strong> env variables magic. The docker API works similar to any JSON based HTTP API, but it is exposed on <strong>docker.sock</strong> socket.</p>
<h3>:ro and :rw suffixes</h3>
<p>I think it's an obvious one but to cover "everything" I can say that those are folder/file permissions: "<strong>R</strong>ead <strong>O</strong>nly" and "<strong>R</strong>ead and <strong>W</strong>rite".</p>
<h3>volumes</h3>
<p>There are 3 kinds of "paths" used in this setup:</p>
<ul>
<li>absolute paths like <strong>/var/run/docker.sock:...</strong> which points to the host system internal files</li>
<li>relative paths e.g. <strong>*./letsencrypt/certs:...</strong> which are a handy way of storing/sharing container files with the host system</li>
<li>volumes dirs <strong>influx-data:...</strong> these are used for ensuring data persistence ensured by the Docker</li>
</ul>
<h3>cert files</h3>
<p>Don't worry that the cert file paths are invalid on the first run when there are no certificate files. As soon as Let's Encrypt certificate request will be fulfilled you will find appropriate certificates in the specified localizations.</p>
<h3>REUSE<em>PRIVATE</em>KEYS</h3>
<p>This option passed to the letsencrypt container via environment variables allows you to reuse same keys after 90 days expiry time. That's the only way to avoid manual restart of the <strong>influx</strong> container after certificates renewal (because of certificate file changes).</p>
<h2>Footnotes</h2>
<p>That's all for now. I'd be happy to answer some questions. I hope to be able to explain everything about this or similar setup.
For testing SSL configuration you may use <a href="https://www.ssllabs.com/ssltest">https://www.ssllabs.com/ssltest</a> (thanks to @Kjetil MjÃ¸s who remid me about this tool in one of his comments). The expected overall grade is <strong>A+</strong>.</p>
<h2>Question: How to add another Grafana instance on separate (sub)domain?</h2>
<p>It should be fairly easy, just point your new (sub)domain at your existing Docker host and add following "section" to the <strong>docker-compose.yml</strong> file:</p>
<div class="gatsby-highlight" data-language="yaml"><pre style="counter-reset: linenumber NaN" class="language-yaml line-numbers"><code class="language-yaml"><span class="token comment">#... existing docker-compose.yml content omitted for brevity</span>
  <span class="token key atrule">grafana2</span><span class="token punctuation">:</span> <span class="token comment"># just for clarification: this is a service name</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> grafana/grafana<span class="token punctuation">:</span>5.0.0 <span class="token comment"># or probably any other version</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> grafana2
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> VIRTUAL_HOST=ANOTHER.DOMAIN.TEST <span class="token comment"># adjust to match your domain name</span>
      <span class="token punctuation">-</span> VIRTUAL_PROTO=https
      <span class="token punctuation">-</span> VIRTUAL_PORT=3000
      <span class="token punctuation">-</span> LETSENCRYPT_HOST=ANOTHER.DOMAIN.TEST <span class="token comment"># adjust to match your domain name</span>
      <span class="token punctuation">-</span> LETSENCRYPT_EMAIL=YOUR.EMAIL@ADDRESS.TEST <span class="token comment"># adjust to match your email</span>

      <span class="token punctuation">-</span> GF_SERVER_CERT_FILE=/etc/letsencrypt/certs/ANOTHER.DOMAIN.TEST.crt <span class="token comment"># adjust to match your domain name</span>
      <span class="token punctuation">-</span> GF_SERVER_CERT_KEY=/etc/letsencrypt/certs/ANOTHER.DOMAIN.TEST.key <span class="token comment"># adjust to match your domain name</span>
      <span class="token punctuation">-</span> GF_SERVER_PROTOCOL=https

      <span class="token punctuation">-</span> GF_SERVER_DOMAIN=ANOTHER.DOMAIN.TEST <span class="token comment"># adjust to match your domain name</span>
      <span class="token punctuation">-</span> GF_SECURITY_ADMIN_USER=SECURE_USERNAME <span class="token comment"># adjust to create Grafana admin account</span>
      <span class="token punctuation">-</span> GF_SECURITY_ADMIN_PASSWORD=SECURE_PASS <span class="token comment"># adjust to set Grafana admin password</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./letsencrypt/certs<span class="token punctuation">:</span>/etc/letsencrypt/certs<span class="token punctuation">:</span>ro

      <span class="token punctuation">-</span> grafana2<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/var/lib/grafana</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Notable changes compared to direct "copy/paste" of existing <strong>grafana</strong> service:</p>
<ul>
<li>please remember to change service name and <strong>container_name</strong> to make them different from existing ones (<strong>grafana2</strong> in this example)</li>
<li>every <strong>YOUR.DOMAIN.TEST</strong> is replaced with <strong>ANOTHER.DOMAIN.TEST</strong> (it might be <strong>any</strong> domain name which is pointed at your host, not necessarly a subdomain with common root domain e.g. <strong>MYDOMAIN.TEST</strong> will work as well)</li>
<li>as you may noticed <strong>LETSENCRYPT_EMAIL</strong> doesn't require any changes as you may use one email for multiple domains</li>
<li>in <strong>volumes</strong> section please remember to change <strong>grafana-data</strong> to any other volume (<strong>grafana2-data</strong> in my example), in other case your Grafana instances will share files (you probably don't want that)</li>
</ul>
<p>You should also add volume mapping for a new Grafana instance at the end of <strong>docker-compose.yml</strong> (which was modified before) in <strong>volumes</strong> section append:</p>
<div class="gatsby-highlight" data-language="yaml"><pre style="counter-reset: linenumber NaN" class="language-yaml line-numbers"><code class="language-yaml"><span class="token comment">#... existing docker-compose.yml content omitted for brevity</span>
<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token comment">#... existing volumes omitted for brevity</span>
  <span class="token key atrule">grafana2-data</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>That's it.
Now execute:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">docker-compose up -d
docker-compose restart</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p>Docker should now run two independent Grafana instances on different (sub)domains.</p></div><div class="styles__Wrapper-n5upcq-0 ZQchY"><a title="Read more posts by Jan Grzegorowski" class="styles__Container-n5upcq-1 gYslaw" href="/author/jan"><div class="styles__Photo-n5upcq-2 kyaInQ"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:60px;height:60px"><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUEAv/EABQBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAa8+nhDphjnIF7Ah/8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAxEiMf/aAAgBAQABBQK5mUB762lg1VGvG8Udif/EABcRAQEBAQAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8BAyHJ/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAECAQE/ATUav//EABsQAQACAgMAAAAAAAAAAAAAAAECEgAQESAx/9oACAEBAAY/Agh64Wbx56u//8QAHBABAAIDAAMAAAAAAAAAAAAAAQARECExgaGx/9oACAEBAAE/IRAL6t4R+NaJW948RDMDnzHpQyxFZP/aAAwDAQACAAMAAAAQD8A8/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EGNZvP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxBJGE//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhEDFRgcH/2gAIAQEAAT8Qfyh9bKr5wsWRAIpRh0prgVXZTPUxvgwCqwb+cGlgG6ILpxBXtz//2Q==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><img loading="lazy" width="60" height="60" srcset="/static/2b64da00e4a3f2952c8d9e3a6b631208/9c097/photo-mini.jpg 1x,
/static/2b64da00e4a3f2952c8d9e3a6b631208/c5aad/photo-mini.jpg 1.5x" src="/static/2b64da00e4a3f2952c8d9e3a6b631208/9c097/photo-mini.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><div class="styles__Info-n5upcq-3 crXwW"><div class="styles__Name-n5upcq-4 hNjtzh">Jan Grzegorowski</div><div class="styles__About-n5upcq-5 bSJODi"></div></div></a><a title="Read more posts by Jan Grzegorowski" class="styles__More-n5upcq-6 LUBlX" href="/author/jan">Read More</a></div></div></div><div class="styles__Comments-sc-18g9haf-16 hGPWto"><div class="styles__CommentsContainer-sc-18g9haf-17 gEbTXz"><div id="disqus_thread"></div></div></div><aside class="styles__Wrapper-sc-177ejwt-0 hMYwmg"><div class="styles__Container-sc-177ejwt-1 iNDMyc"><ul class="styles__List-sc-177ejwt-2 dnkZyx"><li class="styles__Item-sc-177ejwt-3 fRjnCq"><div class="Tile__Wrapper-k83soo-0 iClmz"><div class="styles__Content-sc-1cwohrs-0 jSNjRb"><div class="styles__TopLine-sc-1cwohrs-1 chUfWh"><h5 class="styles__SiteName-sc-1cwohrs-2 cldIKF">Full-stack developer blog by Jan Grzegorowski</h5><a title="Docker" class="styles__LinkTop-sc-1cwohrs-3 buKDqR" href="/tag/docker"><h2 class="styles__Title-sc-1cwohrs-4 ftbNbI">Docker</h2></a></div><ul class="styles__List-sc-1cwohrs-5 jGHblD"><li class="styles__Item-sc-1cwohrs-6 cMLhOG"><a title="Grafana Docker container and Google Analytics" class="styles__Link-sc-1cwohrs-7 tYTWj" href="/docker-grafana-google-analytics">Grafana Docker container and Google Analytics</a></li><li class="styles__Item-sc-1cwohrs-6 cMLhOG"><a title="How to backup and restore InfluxDB which runs inside Docker container" class="styles__Link-sc-1cwohrs-7 tYTWj" href="/how-to-backup-and-restore-influxdb-which-runs-inside-docker-container">How to backup and restore InfluxDB which runs inside Docker container</a></li><li class="styles__Item-sc-1cwohrs-6 cMLhOG"><a title="DNSmasq for custom development domain name" class="styles__Link-sc-1cwohrs-7 tYTWj" href="/how-to-use-custom-domain-names-with-localhost-vagrant-docker-dnsmasq">DNSmasq for custom development domain name</a></li><li class="styles__Item-sc-1cwohrs-6 cMLhOG"><a title="Docker for Mac OS X" class="styles__Link-sc-1cwohrs-7 tYTWj" href="/docker-for-mac-os-x">Docker for Mac OS X</a></li><li class="styles__Item-sc-1cwohrs-6 cMLhOG"><a title="See all" class="styles__Link-sc-1cwohrs-7 tYTWj" href="/tag/docker">See all <!-- -->6<!-- --> posts</a></li></ul></div></div></li><li class="styles__Item-sc-177ejwt-3 fRjnCq"><div class="Tile__Wrapper-k83soo-0 iClmz"><article class="styles__Article-zl0bsg-0 bEhqbx"><a title="Traefik - proxy development server with self-signed SSL certificate" class="styles__Link-zl0bsg-1 iXqmXg" href="/traefik-proxy-development-server-self-signed-ssl"><div class="styles__Thumbnail-zl0bsg-2 jYyKqg gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:50%"></div><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAeABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAECAwQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAe0nkjUMDNfAtIB//8QAGRAAAwEBAQAAAAAAAAAAAAAAAAECEBEx/9oACAEBAAEFAtfkNuhkzyh7/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFxAAAwEAAAAAAAAAAAAAAAAAAREgMP/aAAgBAQAGPwKA8P/EABoQAAIDAQEAAAAAAAAAAAAAAAARARBBITH/2gAIAQEAAT8hm/YxonXgndldR0S0cn//2gAMAwEAAgADAAAAEL//AMP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAbEAADAQADAQAAAAAAAAAAAAAAARExECFRQf/aAAgBAQABPxCh3wQuWkmR4R7843S0Q/CbnCqXZDZumQoaf//Z" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><img loading="lazy" sizes="(max-width: 600px) 100vw, 600px" srcset="/static/d82df298cb57c0123e8c64bd116c3d65/38b6a/photo-1512168203104-3910bc2bcd54.jpg 150w,
/static/d82df298cb57c0123e8c64bd116c3d65/e201c/photo-1512168203104-3910bc2bcd54.jpg 300w,
/static/d82df298cb57c0123e8c64bd116c3d65/0defe/photo-1512168203104-3910bc2bcd54.jpg 600w,
/static/d82df298cb57c0123e8c64bd116c3d65/a71f1/photo-1512168203104-3910bc2bcd54.jpg 900w,
/static/d82df298cb57c0123e8c64bd116c3d65/8d595/photo-1512168203104-3910bc2bcd54.jpg 1080w" src="/static/d82df298cb57c0123e8c64bd116c3d65/0defe/photo-1512168203104-3910bc2bcd54.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="styles__Content-zl0bsg-4 cYibTA"><h3 class="styles__Tag-zl0bsg-5 iaYraz">backend</h3><h2 class="styles__Title-zl0bsg-6 kASfVB">Traefik - proxy development server with self-signed SSL certificate</h2><p class="styles__Excerpt-zl0bsg-7 lbCqxU">You want to check how (or if) your application works with SSL encryption without exposing it to the Internet? Use a self-signed SSLâ€¦</p><div class="styles__Footer-zl0bsg-8 berEvg"><div class="styles__Author-zl0bsg-9 gZqHrI"><div class="styles__Avatar-zl0bsg-10 cVDVpq gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:30px;height:30px"><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUEAv/EABQBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAa8+nhDphjnIF7Ah/8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAxEiMf/aAAgBAQABBQK5mUB762lg1VGvG8Udif/EABcRAQEBAQAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8BAyHJ/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAECAQE/ATUav//EABsQAQACAgMAAAAAAAAAAAAAAAECEgAQESAx/9oACAEBAAY/Agh64Wbx56u//8QAHBABAAIDAAMAAAAAAAAAAAAAAQARECExgaGx/9oACAEBAAE/IRAL6t4R+NaJW948RDMDnzHpQyxFZP/aAAwDAQACAAMAAAAQD8A8/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EGNZvP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxBJGE//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhEDFRgcH/2gAIAQEAAT8Qfyh9bKr5wsWRAIpRh0prgVXZTPUxvgwCqwb+cGlgG6ILpxBXtz//2Q==" alt="Jan Grzegorowski" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><img loading="lazy" width="30" height="30" srcset="/static/2b64da00e4a3f2952c8d9e3a6b631208/a6b89/photo-mini.jpg 1x,
/static/2b64da00e4a3f2952c8d9e3a6b631208/74c3b/photo-mini.jpg 1.5x,
/static/2b64da00e4a3f2952c8d9e3a6b631208/9c097/photo-mini.jpg 2x" src="/static/2b64da00e4a3f2952c8d9e3a6b631208/a6b89/photo-mini.jpg" alt="Jan Grzegorowski" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><div class="styles__TimeToRead-zl0bsg-11 KWfpA">8<!-- --> min read</div></div></div></a></article></div></li><li class="styles__Item-sc-177ejwt-3 fRjnCq"><div class="Tile__Wrapper-k83soo-0 iClmz"><article class="styles__Article-zl0bsg-0 bEhqbx"><a title="RabbitMQ amqplib - &quot;Error: Channel closed by server: 406 (PRECONDITION-FAILED) with message &quot;PRECONDITION_FAILED - unknown delivery tag 1&quot;" class="styles__Link-zl0bsg-1 iXqmXg" href="/rabbitmq-406-channel-closed-precondition-failed"><div class="styles__Thumbnail-zl0bsg-2 jYyKqg gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:50%"></div><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABcBAAMBAAAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAYarEzzSKX//xAAaEAACAwEBAAAAAAAAAAAAAAABAgADIREi/9oACAEBAAEFAqkBlnDGXR5Sk4x3/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFREBAQAAAAAAAAAAAAAAAAAAABL/2gAIAQIBAT8BW//EABkQAQEAAwEAAAAAAAAAAAAAAAARAQIxQf/aAAgBAQAGPwK15XFbXFcf/8QAGxABAAIDAQEAAAAAAAAAAAAAAQAhEUFRMXH/2gAIAQEAAT8hK8Xkx0ArfyIQGcZUKuXAW3OJP//aAAwDAQACAAMAAAAQ6B//xAAWEQADAAAAAAAAAAAAAAAAAAABEDH/2gAIAQMBAT8QEX//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQIBAT8QUxWJ/8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFBYYH/2gAIAQEAAT8QHsatheu4sgtQOPUSgvhcNsybYLh3ARo8gDCg4yf/2Q==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><img loading="lazy" sizes="(max-width: 600px) 100vw, 600px" srcset="/static/2929536528310985128f48a405cf2d81/38b6a/photo-1534279172812-fed91fae8966.jpg 150w,
/static/2929536528310985128f48a405cf2d81/e201c/photo-1534279172812-fed91fae8966.jpg 300w,
/static/2929536528310985128f48a405cf2d81/0defe/photo-1534279172812-fed91fae8966.jpg 600w,
/static/2929536528310985128f48a405cf2d81/a71f1/photo-1534279172812-fed91fae8966.jpg 900w,
/static/2929536528310985128f48a405cf2d81/8d595/photo-1534279172812-fed91fae8966.jpg 1080w" src="/static/2929536528310985128f48a405cf2d81/0defe/photo-1534279172812-fed91fae8966.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="styles__Content-zl0bsg-4 cYibTA"><h3 class="styles__Tag-zl0bsg-5 iaYraz">backend</h3><h2 class="styles__Title-zl0bsg-6 kASfVB">RabbitMQ amqplib - &quot;Error: Channel closed by server: 406 (PRECONDITION-FAILED) with message &quot;PRECONDITION_FAILED - unknown delivery tag 1&quot;</h2><p class="styles__Excerpt-zl0bsg-7 lbCqxU">If you are struggling with the 406 error message which is included in title of this post you may be interested in reading the whole storyâ€¦</p><div class="styles__Footer-zl0bsg-8 berEvg"><div class="styles__Author-zl0bsg-9 gZqHrI"><div class="styles__Avatar-zl0bsg-10 cVDVpq gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:30px;height:30px"><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUEAv/EABQBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAa8+nhDphjnIF7Ah/8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAxEiMf/aAAgBAQABBQK5mUB762lg1VGvG8Udif/EABcRAQEBAQAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8BAyHJ/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAECAQE/ATUav//EABsQAQACAgMAAAAAAAAAAAAAAAECEgAQESAx/9oACAEBAAY/Agh64Wbx56u//8QAHBABAAIDAAMAAAAAAAAAAAAAAQARECExgaGx/9oACAEBAAE/IRAL6t4R+NaJW948RDMDnzHpQyxFZP/aAAwDAQACAAMAAAAQD8A8/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EGNZvP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxBJGE//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhEDFRgcH/2gAIAQEAAT8Qfyh9bKr5wsWRAIpRh0prgVXZTPUxvgwCqwb+cGlgG6ILpxBXtz//2Q==" alt="Jan Grzegorowski" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><img loading="lazy" width="30" height="30" srcset="/static/2b64da00e4a3f2952c8d9e3a6b631208/a6b89/photo-mini.jpg 1x,
/static/2b64da00e4a3f2952c8d9e3a6b631208/74c3b/photo-mini.jpg 1.5x,
/static/2b64da00e4a3f2952c8d9e3a6b631208/9c097/photo-mini.jpg 2x" src="/static/2b64da00e4a3f2952c8d9e3a6b631208/a6b89/photo-mini.jpg" alt="Jan Grzegorowski" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><div class="styles__TimeToRead-zl0bsg-11 KWfpA">1<!-- --> min read</div></div></div></a></article></div></li><li class="styles__Item-sc-177ejwt-3 fRjnCq"><div class="Tile__Wrapper-k83soo-0 iClmz"><article class="styles__Article-zl0bsg-0 bEhqbx"><a title="Grafana Docker container and Google Analytics" class="styles__Link-zl0bsg-1 iXqmXg" href="/docker-grafana-google-analytics"><div class="styles__Thumbnail-zl0bsg-2 jYyKqg gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:50%"></div><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABy6TZyghP/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAERECH/2gAIAQEAAQUCqRTgsZ//xAAWEQEBAQAAAAAAAAAAAAAAAAAAEQH/2gAIAQMBAT8BmI//xAAXEQADAQAAAAAAAAAAAAAAAAAAARES/9oACAECAQE/AdMrP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgMf/aAAgBAQAGPwIi/wD/xAAbEAACAgMBAAAAAAAAAAAAAAAAAREhMVFhgf/aAAgBAQABPyHEaIq4x0blrwSitEE8H//aAAwDAQACAAMAAAAQBO//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQMBAT8Qiy//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/EAv/xAAbEAEAAgIDAAAAAAAAAAAAAAABABEhUTFBcf/aAAgBAQABPxAcoa1MYI+4Vki0qAhQfSNjjiKjSf/Z" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><img loading="lazy" sizes="(max-width: 600px) 100vw, 600px" srcset="/static/519a97714c74ce11183212fe7806cb18/38b6a/docker-containers.jpg 150w,
/static/519a97714c74ce11183212fe7806cb18/e201c/docker-containers.jpg 300w,
/static/519a97714c74ce11183212fe7806cb18/0defe/docker-containers.jpg 600w,
/static/519a97714c74ce11183212fe7806cb18/a71f1/docker-containers.jpg 900w,
/static/519a97714c74ce11183212fe7806cb18/9f6c3/docker-containers.jpg 1200w,
/static/519a97714c74ce11183212fe7806cb18/e95fb/docker-containers.jpg 1280w" src="/static/519a97714c74ce11183212fe7806cb18/0defe/docker-containers.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="styles__Content-zl0bsg-4 cYibTA"><h3 class="styles__Tag-zl0bsg-5 iaYraz">docker</h3><h2 class="styles__Title-zl0bsg-6 kASfVB">Grafana Docker container and Google Analytics</h2><p class="styles__Excerpt-zl0bsg-7 lbCqxU">How easy is adding Google Analytics support to Grafana Docker container?It&#x27;s trivial.Just add an environment variable to the Grafanaâ€¦</p><div class="styles__Footer-zl0bsg-8 berEvg"><div class="styles__Author-zl0bsg-9 gZqHrI"><div class="styles__Avatar-zl0bsg-10 cVDVpq gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:30px;height:30px"><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUEAv/EABQBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAa8+nhDphjnIF7Ah/8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAxEiMf/aAAgBAQABBQK5mUB762lg1VGvG8Udif/EABcRAQEBAQAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8BAyHJ/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAECAQE/ATUav//EABsQAQACAgMAAAAAAAAAAAAAAAECEgAQESAx/9oACAEBAAY/Agh64Wbx56u//8QAHBABAAIDAAMAAAAAAAAAAAAAAQARECExgaGx/9oACAEBAAE/IRAL6t4R+NaJW948RDMDnzHpQyxFZP/aAAwDAQACAAMAAAAQD8A8/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EGNZvP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxBJGE//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhEDFRgcH/2gAIAQEAAT8Qfyh9bKr5wsWRAIpRh0prgVXZTPUxvgwCqwb+cGlgG6ILpxBXtz//2Q==" alt="Jan Grzegorowski" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><img loading="lazy" width="30" height="30" srcset="/static/2b64da00e4a3f2952c8d9e3a6b631208/a6b89/photo-mini.jpg 1x,
/static/2b64da00e4a3f2952c8d9e3a6b631208/74c3b/photo-mini.jpg 1.5x,
/static/2b64da00e4a3f2952c8d9e3a6b631208/9c097/photo-mini.jpg 2x" src="/static/2b64da00e4a3f2952c8d9e3a6b631208/a6b89/photo-mini.jpg" alt="Jan Grzegorowski" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><div class="styles__TimeToRead-zl0bsg-11 KWfpA">1<!-- --> min read</div></div></div></a></article></div></li><li class="styles__Item-sc-177ejwt-3 fRjnCq"><div class="Tile__Wrapper-k83soo-0 iClmz"><article class="styles__Article-zl0bsg-0 bEhqbx"><a title="How to backup and restore InfluxDB which runs inside Docker container" class="styles__Link-zl0bsg-1 iXqmXg" href="/how-to-backup-and-restore-influxdb-which-runs-inside-docker-container"><div class="styles__Thumbnail-zl0bsg-2 jYyKqg gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:50%"></div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABX0lEQVQoz1WReWvCQBDFc+yRY3NoDhM1Uaq1EbVQJZYipUKR0u//gV5n11rsH4+ZDbu/vHlj5dkQ81mD7mmJbrVE20wwm7Vomil2uw0Ohz0GgyE4E1BRDM8P4LocLuOmcuGDS5LwwLkHK00TVFWJdfeIj9Mrjvsdzqce/f4Z5/c3fF/O+Lp8Yrvd0CMJxoWB6V56AQTpBnTpp1YYhCjzDJN6hOm4QjMeoR7lWK8W2HZLPLQ1+sMLjsceQahIEVScIFAxpK/+gBrmkGNr3jZgLoNru3Bsh2xzcx6mEcosRUZ1MW9oigohAbOiRJQO4BNY+iHEHcw4VEoRgJuMBI3DqOqxpJSIVEjgBEkcmTF1hoMsQxhTloH650xXfbZsh1HjGQntjl0D15ds5yrHpUf0rSwK1HVlYDq/G4hxec2RGBb7JRuRMx2upE2G5FxL0KXrIgTyvEBOUN3fxPR27xbzA7KLpDXSJofxAAAAAElFTkSuQmCC" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><img loading="lazy" sizes="(max-width: 600px) 100vw, 600px" srcset="/static/7fa76383651ee47dc9f9bae462d16217/eed6b/dockerized-influxdb-restore.png 150w,
/static/7fa76383651ee47dc9f9bae462d16217/44052/dockerized-influxdb-restore.png 300w,
/static/7fa76383651ee47dc9f9bae462d16217/d1858/dockerized-influxdb-restore.png 600w,
/static/7fa76383651ee47dc9f9bae462d16217/6b4f3/dockerized-influxdb-restore.png 900w,
/static/7fa76383651ee47dc9f9bae462d16217/f5d99/dockerized-influxdb-restore.png 1200w,
/static/7fa76383651ee47dc9f9bae462d16217/05be9/dockerized-influxdb-restore.png 1277w" src="/static/7fa76383651ee47dc9f9bae462d16217/d1858/dockerized-influxdb-restore.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="styles__Content-zl0bsg-4 cYibTA"><h3 class="styles__Tag-zl0bsg-5 iaYraz">docker</h3><h2 class="styles__Title-zl0bsg-6 kASfVB">How to backup and restore InfluxDB which runs inside Docker container</h2><p class="styles__Excerpt-zl0bsg-7 lbCqxU">Running InfluxDB inside Docker container is extremely easy with the official image available on Docker Hub https://hub.docker.com/_/influxdbâ€¦</p><div class="styles__Footer-zl0bsg-8 berEvg"><div class="styles__Author-zl0bsg-9 gZqHrI"><div class="styles__Avatar-zl0bsg-10 cVDVpq gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:30px;height:30px"><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUEAv/EABQBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAa8+nhDphjnIF7Ah/8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAxEiMf/aAAgBAQABBQK5mUB762lg1VGvG8Udif/EABcRAQEBAQAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8BAyHJ/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAECAQE/ATUav//EABsQAQACAgMAAAAAAAAAAAAAAAECEgAQESAx/9oACAEBAAY/Agh64Wbx56u//8QAHBABAAIDAAMAAAAAAAAAAAAAAQARECExgaGx/9oACAEBAAE/IRAL6t4R+NaJW948RDMDnzHpQyxFZP/aAAwDAQACAAMAAAAQD8A8/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EGNZvP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxBJGE//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhEDFRgcH/2gAIAQEAAT8Qfyh9bKr5wsWRAIpRh0prgVXZTPUxvgwCqwb+cGlgG6ILpxBXtz//2Q==" alt="Jan Grzegorowski" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><img loading="lazy" width="30" height="30" srcset="/static/2b64da00e4a3f2952c8d9e3a6b631208/a6b89/photo-mini.jpg 1x,
/static/2b64da00e4a3f2952c8d9e3a6b631208/74c3b/photo-mini.jpg 1.5x,
/static/2b64da00e4a3f2952c8d9e3a6b631208/9c097/photo-mini.jpg 2x" src="/static/2b64da00e4a3f2952c8d9e3a6b631208/a6b89/photo-mini.jpg" alt="Jan Grzegorowski" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><div class="styles__TimeToRead-zl0bsg-11 KWfpA">4<!-- --> min read</div></div></div></a></article></div></li><li class="styles__Item-sc-177ejwt-3 fRjnCq"><div class="Tile__Wrapper-k83soo-0 iClmz"><article class="styles__Article-zl0bsg-0 bEhqbx"><a title="DNSmasq for custom development domain name" class="styles__Link-zl0bsg-1 iXqmXg" href="/how-to-use-custom-domain-names-with-localhost-vagrant-docker-dnsmasq"><div class="styles__Thumbnail-zl0bsg-2 jYyKqg gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:50%"></div><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHkVQ0o/8QAGBABAQEBAQAAAAAAAAAAAAAAAAECITH/2gAIAQEAAQUCdXNqs+v/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwEn/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8BZ//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABkQAQEBAQEBAAAAAAAAAAAAAAERAEEQIf/aAAgBAQABPyFoprAX7mLHcL3Gnz//2gAMAwEAAgADAAAAEBg//8QAFhEAAwAAAAAAAAAAAAAAAAAAARAR/9oACAEDAQE/EKC//8QAFhEAAwAAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/ECq//8QAGhABAQEBAAMAAAAAAAAAAAAAAREAITFBcf/aAAgBAQABPxCwrB5OYQEDh3ur3inHUiqm/MdXquDf/9k=" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><img loading="lazy" sizes="(max-width: 600px) 100vw, 600px" srcset="/static/9d35c0153499047c6f60de1dead84d58/38b6a/dnsmasq-custom-local-domain.jpg 150w,
/static/9d35c0153499047c6f60de1dead84d58/e201c/dnsmasq-custom-local-domain.jpg 300w,
/static/9d35c0153499047c6f60de1dead84d58/0defe/dnsmasq-custom-local-domain.jpg 600w,
/static/9d35c0153499047c6f60de1dead84d58/a71f1/dnsmasq-custom-local-domain.jpg 900w,
/static/9d35c0153499047c6f60de1dead84d58/9f6c3/dnsmasq-custom-local-domain.jpg 1200w,
/static/9d35c0153499047c6f60de1dead84d58/e95fb/dnsmasq-custom-local-domain.jpg 1280w" src="/static/9d35c0153499047c6f60de1dead84d58/0defe/dnsmasq-custom-local-domain.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="styles__Content-zl0bsg-4 cYibTA"><h3 class="styles__Tag-zl0bsg-5 iaYraz">tools</h3><h2 class="styles__Title-zl0bsg-6 kASfVB">DNSmasq for custom development domain name</h2><p class="styles__Excerpt-zl0bsg-7 lbCqxU">Setting up a custom domain name for a local development may be really useful especially when you want to test multisite setup (e.g. forâ€¦</p><div class="styles__Footer-zl0bsg-8 berEvg"><div class="styles__Author-zl0bsg-9 gZqHrI"><div class="styles__Avatar-zl0bsg-10 cVDVpq gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:30px;height:30px"><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUEAv/EABQBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAa8+nhDphjnIF7Ah/8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAxEiMf/aAAgBAQABBQK5mUB762lg1VGvG8Udif/EABcRAQEBAQAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8BAyHJ/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAECAQE/ATUav//EABsQAQACAgMAAAAAAAAAAAAAAAECEgAQESAx/9oACAEBAAY/Agh64Wbx56u//8QAHBABAAIDAAMAAAAAAAAAAAAAAQARECExgaGx/9oACAEBAAE/IRAL6t4R+NaJW948RDMDnzHpQyxFZP/aAAwDAQACAAMAAAAQD8A8/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EGNZvP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxBJGE//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhEDFRgcH/2gAIAQEAAT8Qfyh9bKr5wsWRAIpRh0prgVXZTPUxvgwCqwb+cGlgG6ILpxBXtz//2Q==" alt="Jan Grzegorowski" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><img loading="lazy" width="30" height="30" srcset="/static/2b64da00e4a3f2952c8d9e3a6b631208/a6b89/photo-mini.jpg 1x,
/static/2b64da00e4a3f2952c8d9e3a6b631208/74c3b/photo-mini.jpg 1.5x,
/static/2b64da00e4a3f2952c8d9e3a6b631208/9c097/photo-mini.jpg 2x" src="/static/2b64da00e4a3f2952c8d9e3a6b631208/a6b89/photo-mini.jpg" alt="Jan Grzegorowski" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><div class="styles__TimeToRead-zl0bsg-11 KWfpA">1<!-- --> min read</div></div></div></a></article></div></li></ul></div></aside></article></main><header class="styles__Wrapper-sc-1diyvya-0 kfJjUJ"><div class="styles__Container-sc-1diyvya-1 hNGpJr"><a class="styles__Name-sc-1diyvya-2 klwlbE" href="/">Jan Grzegorowski<!-- --> Â© 2019</a></div></header></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---gatsby-ghost-theme-src-templates-post-js","jsonName":"grafana-with-lets-encrypt-ssl-on-docker-724","path":"/grafana-with-lets-encrypt-ssl-on-docker"};window.dataPath="314/path---grafana-with-lets-encrypt-ssl-on-docker-724-f07-gaPOXDRVpe5pnBSBtSxaHYHKO2Y";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-aa46b3f538b5a7597bfa.js"],"component---gatsby-ghost-theme-src-templates-post-js":["/component---gatsby-ghost-theme-src-templates-post-js-6a64e563e2f45fd55928.js"],"component---gatsby-ghost-theme-src-templates-page-js":["/component---gatsby-ghost-theme-src-templates-page-js-a5ace06fb732ea93f957.js"],"component---gatsby-ghost-theme-src-templates-home-js":["/component---gatsby-ghost-theme-src-templates-home-js-c798e9746b384517a738.js"],"component---gatsby-ghost-theme-src-templates-author-js":["/component---gatsby-ghost-theme-src-templates-author-js-0125bcff3ebacc2dbd14.js"],"component---gatsby-ghost-theme-src-templates-tag-js":["/component---gatsby-ghost-theme-src-templates-tag-js-074404a7a5258e763f4f.js"],"component---gatsby-ghost-theme-src-templates-404-js":["/component---gatsby-ghost-theme-src-templates-404-js-4628e3c3bd2cf68d600a.js"],"pages-manifest":["/pages-manifest-852aa7feb499b1b3f83a.js"]};/*]]>*/</script><script src="/webpack-runtime-330d110dff7a736dbf08.js" async=""></script><script src="/app-aa46b3f538b5a7597bfa.js" async=""></script><script src="/0-c2e34c465eb48179819f.js" async=""></script><script src="/1-504fdce3920a82105d6a.js" async=""></script><script src="/component---gatsby-ghost-theme-src-templates-post-js-6a64e563e2f45fd55928.js" async=""></script><script src="/styles-f8d8fa4325bb16937a78.js" async=""></script></body></html>